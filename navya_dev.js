(()=>{(()=>{var hr={228:(G,u,v)=>{"use strict";v.d(u,{v4:()=>E});for(var S=256,A=[],b;S--;)A[S]=(S+256).toString(16).substring(1);function E(){var m=0,h,g="";if(!b||S+16>256){for(b=Array(m=256);m--;)b[m]=256*Math.random()|0;m=S=0}for(;m<16;m++)h=b[S+m],m==6?g+=A[h&15|64]:m==8?g+=A[h&63|128]:g+=A[h],m&1&&m>1&&m<11&&(g+="-");return S++,g}},638:(G,u,v)=>{"use strict";v.r(u),v.d(u,{link:()=>E,form:()=>m});var S=v(194);function A(h){var g=h;return!!(g.ctrlKey||g.shiftKey||g.metaKey||g.button&&g.button==1)}function b(h,g){return!!(h.target==="_blank"&&g)}function E(h,g,l,d){var p=this,f=[];return h?(h instanceof Element?f=[h]:"toArray"in h?f=h.toArray():f=h,f.forEach(function(_){_.addEventListener("click",function(j){var L,B,Z=g instanceof Function?g(_):g,X=l instanceof Function?l(_):l,tt=_.getAttribute("href")||_.getAttributeNS("http://www.w3.org/1999/xlink","href")||_.getAttribute("xlink:href")||((L=_.getElementsByTagName("a")[0])===null||L===void 0?void 0:L.getAttribute("href")),ct=(0,S.FJ)(p.track(Z,X,d!=null?d:{}),(B=p.settings.timeout)!==null&&B!==void 0?B:500);!b(_,tt)&&!A(j)&&tt&&(j.preventDefault?j.preventDefault():j.returnValue=!1,ct.catch(console.error).then(function(){window.location.href=tt}).catch(console.error))},!1)}),this):this}function m(h,g,l,d){var p=this;if(!h)return this;h instanceof HTMLFormElement&&(h=[h]);var f=h;return f.forEach(function(_){if(!(_ instanceof Element))throw new TypeError("Must pass HTMLElement to trackForm/trackSubmit.");var j=function(B){var Z;B.preventDefault?B.preventDefault():B.returnValue=!1;var X=g instanceof Function?g(_):g,tt=l instanceof Function?l(_):l,ct=(0,S.FJ)(p.track(X,tt,d!=null?d:{}),(Z=p.settings.timeout)!==null&&Z!==void 0?Z:500);ct.catch(console.error).then(function(){_.submit()}).catch(console.error)},L=window.jQuery||window.Zepto;L?L(_).submit(j):_.addEventListener("submit",j,!1)}),this}},871:(G,u,v)=>{"use strict";v.d(u,{a:()=>S});function S(A){try{return decodeURIComponent(A.replace(/\+/g," "))}catch(b){return A}}},610:(G,u,v)=>{"use strict";v.r(u),v.d(u,{queryString:()=>E});function S(m,h){return Object.keys(h).reduce(function(g,l){if(l.startsWith(m)){var d=l.substr(m.length);g[d]=h[l]}return g},{})}var A=v(871),b=v(143);function E(m,h){var g=document.createElement("a");g.href=h;var l=g.search.slice(1),d=l.split("&").reduce(function(vt,Nt){var Et=Nt.split("="),Lt=Et[0],At=Et[1];return vt[Lt]=(0,A.a)(At),vt},{}),p=[],f=d.ajs_uid,_=d.ajs_event,j=d.ajs_aid,L=(0,b.PO)(m.options.useQueryString)?m.options.useQueryString:{},B=L.aid,Z=B===void 0?/.+/:B,X=L.uid,tt=X===void 0?/.+/:X;if(j){var ct=Array.isArray(d.ajs_aid)?d.ajs_aid[0]:d.ajs_aid;Z.test(ct)&&m.setAnonymousId(ct)}if(f){var ht=Array.isArray(d.ajs_uid)?d.ajs_uid[0]:d.ajs_uid;if(tt.test(ht)){var lt=S("ajs_trait_",d);p.push(m.identify(ht,lt))}}if(_){var St=Array.isArray(d.ajs_event)?d.ajs_event[0]:d.ajs_event,Gt=S("ajs_prop_",d);p.push(m.track(St,Gt))}return Promise.all(p)}},497:(G,u,v)=>{"use strict";v.d(u,{D:()=>b});var S=v(122),A=v.n(S);function b(E,m){var h=new S.Facade(E,m);return E.type==="track"&&(h=new S.Track(E,m)),E.type==="identify"&&(h=new S.Identify(E,m)),E.type==="page"&&(h=new S.Page(E,m)),E.type==="alias"&&(h=new S.Alias(E,m)),E.type==="group"&&(h=new S.Group(E,m)),E.type==="screen"&&(h=new S.Screen(E,m)),Object.defineProperty(h,"obj",{value:E,writable:!0}),h}},235:(G,u,v)=>{"use strict";v.r(u),v.d(u,{applyDestinationMiddleware:()=>E,sourceMiddlewarePlugin:()=>m});var S=v(95),A=v(137),b=v(497);function E(h,g,l){return(0,S.mG)(this,void 0,void 0,function(){function d(B,Z){return(0,S.mG)(this,void 0,void 0,function(){var X,tt,ct;return(0,S.Jh)(this,function(ht){switch(ht.label){case 0:return X=!1,tt=null,[4,Z({payload:(0,b.D)(B,{clone:!0,traverse:!1}),integration:h,next:function(lt){X=!0,lt===null&&(tt=null),lt&&(tt=lt.obj)}})];case 1:return ht.sent(),!X&&tt!==null&&(tt=tt,tt.integrations=(0,S.pi)((0,S.pi)({},B.integrations),(ct={},ct[h]=!1,ct))),[2,tt]}})})}var p,f,_,j,L;return(0,S.Jh)(this,function(B){switch(B.label){case 0:p=(0,b.D)(g,{clone:!0,traverse:!1}).rawEvent(),f=0,_=l,B.label=1;case 1:return f<_.length?(j=_[f],[4,d(p,j)]):[3,4];case 2:if(L=B.sent(),L===null)return[2,null];p=L,B.label=3;case 3:return f++,[3,1];case 4:return[2,p]}})})}function m(h,g){function l(d){return(0,S.mG)(this,void 0,void 0,function(){var p;return(0,S.Jh)(this,function(f){switch(f.label){case 0:return p=!1,[4,h({payload:(0,b.D)(d.event,{clone:!0,traverse:!1}),integrations:g!=null?g:{},next:function(_){p=!0,_&&(d.event=_.obj)}})];case 1:if(f.sent(),!p)throw new A.Y({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,d]}})})}return{name:"Source Middleware ".concat(h.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(d){return Promise.resolve(d)},track:l,page:l,identify:l,alias:l,group:l}}},194:(G,u,v)=>{"use strict";v.d(u,{FJ:()=>S,UI:()=>b});function S(E,m){return new Promise(function(h,g){var l=setTimeout(function(){g(Error("Promise timed out"))},m);E.then(function(d){return clearTimeout(l),h(d)}).catch(g)})}function A(E){return new Promise(function(m){return setTimeout(m,E)})}function b(E,m,h){var g=function(){try{return Promise.resolve(m(E))}catch(l){return Promise.reject(l)}};return A(h).then(function(){return S(g(),1e3)}).catch(function(l){E==null||E.log("warn","Callback Error",{error:l}),E==null||E.stats.increment("callback_error")}).then(function(){return E})}},137:(G,u,v)=>{"use strict";v.d(u,{Y:()=>h,_:()=>g});var S=v(228),A=v(168),b=v(95),E=function(){function l(){this._logs=[]}return l.prototype.log=function(d,p,f){var _=new Date;this._logs.push({level:d,message:p,time:_,extras:f})},Object.defineProperty(l.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),l.prototype.flush=function(){if(this.logs.length>1){var d=this._logs.reduce(function(p,f){var _,j,L,B=(0,b.pi)((0,b.pi)({},f),{json:JSON.stringify(f.extras,null," "),extras:f.extras});delete B.time;var Z=(L=(j=f.time)===null||j===void 0?void 0:j.toISOString())!==null&&L!==void 0?L:"";return p[Z]&&(Z="".concat(Z,"-").concat(Math.random())),(0,b.pi)((0,b.pi)({},p),(_={},_[Z]=B,_))},{});console.table?console.table(d):console.log(d)}else this.logs.forEach(function(p){var f=p.level,_=p.message,j=p.extras;f==="info"||f==="debug"?console.log(_,j!=null?j:""):console[f](_,j!=null?j:"")});this._logs=[]},l}(),m=v(61),h=function(){function l(d){var p,f,_;this.retry=(p=d.retry)!==null&&p!==void 0?p:!0,this.type=(f=d.type)!==null&&f!==void 0?f:"plugin Error",this.reason=(_=d.reason)!==null&&_!==void 0?_:""}return l}(),g=function(){function l(d,p,f,_){p===void 0&&(p=(0,S.v4)()),f===void 0&&(f=new m.i),_===void 0&&(_=new E),this.attempts=0,this.event=d,this._id=p,this.logger=_,this.stats=f}return l.system=function(){},l.prototype.isSame=function(d){return d.id===this.id},l.prototype.cancel=function(d){throw d||new h({reason:"Context Cancel"})},l.prototype.log=function(d,p,f){this.logger.log(d,p,f)},Object.defineProperty(l.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),l.prototype.updateEvent=function(d,p){var f;if(d.split(".")[0]==="integrations"){var _=d.split(".")[1];if(((f=this.event.integrations)===null||f===void 0?void 0:f[_])===!1)return this.event}return(0,A.N)(this.event,d,p),this.event},l.prototype.failedDelivery=function(){return this._failedDelivery},l.prototype.setFailedDelivery=function(d){this._failedDelivery=d},l.prototype.logs=function(){return this.logger.logs},l.prototype.flush=function(){this.logger.flush(),this.stats.flush()},l.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},l}()},61:(G,u,v)=>{"use strict";v.d(u,{s:()=>b,i:()=>E});var S=v(95),A=function(m){var h={gauge:"g",counter:"c"};return h[m]},b=function(){function m(){this.metrics=[]}return m.prototype.increment=function(h,g,l){g===void 0&&(g=1),this.metrics.push({metric:h,value:g,tags:l!=null?l:[],type:"counter",timestamp:Date.now()})},m.prototype.gauge=function(h,g,l){this.metrics.push({metric:h,value:g,tags:l!=null?l:[],type:"gauge",timestamp:Date.now()})},m.prototype.flush=function(){var h=this.metrics.map(function(g){return(0,S.pi)((0,S.pi)({},g),{tags:g.tags.join(",")})});console.table?console.table(h):console.log(h),this.metrics=[]},m.prototype.serialize=function(){return this.metrics.map(function(h){return{m:h.metric,v:h.value,t:h.tags,k:A(h.type),e:h.timestamp}})},m}(),E=function(m){(0,S.ZT)(h,m);function h(){return m!==null&&m.apply(this,arguments)||this}return h.prototype.gauge=function(){for(var g=[],l=0;l<arguments.length;l++)g[l]=arguments[l]},h.prototype.increment=function(){for(var g=[],l=0;l<arguments.length;l++)g[l]=arguments[l]},h.prototype.flush=function(){for(var g=[],l=0;l<arguments.length;l++)g[l]=arguments[l]},h.prototype.serialize=function(){for(var g=[],l=0;l<arguments.length;l++)g[l]=arguments[l];return[]},h}(b)},143:(G,u,v)=>{"use strict";v.d(u,{HD:()=>S,hj:()=>A,mf:()=>b,Gg:()=>E,PO:()=>m});function S(h){return typeof h=="string"}function A(h){return typeof h=="number"}function b(h){return typeof h=="function"}function E(h){return h!=null}function m(h){return Object.prototype.toString.call(h).slice(8,-1).toLowerCase()==="object"}},95:(G,u,v)=>{"use strict";v.d(u,{ZT:()=>A,pi:()=>b,_T:()=>E,mG:()=>_,Jh:()=>j,ev:()=>ht});var S=function(C,P){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,O){I.__proto__=O}||function(I,O){for(var k in O)Object.prototype.hasOwnProperty.call(O,k)&&(I[k]=O[k])},S(C,P)};function A(C,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");S(C,P);function I(){this.constructor=C}C.prototype=P===null?Object.create(P):(I.prototype=P.prototype,new I)}var b=function(){return b=Object.assign||function(P){for(var I,O=1,k=arguments.length;O<k;O++){I=arguments[O];for(var M in I)Object.prototype.hasOwnProperty.call(I,M)&&(P[M]=I[M])}return P},b.apply(this,arguments)};function E(C,P){var I={};for(var O in C)Object.prototype.hasOwnProperty.call(C,O)&&P.indexOf(O)<0&&(I[O]=C[O]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var k=0,O=Object.getOwnPropertySymbols(C);k<O.length;k++)P.indexOf(O[k])<0&&Object.prototype.propertyIsEnumerable.call(C,O[k])&&(I[O[k]]=C[O[k]]);return I}function m(C,P,I,O){var k=arguments.length,M=k<3?P:O===null?O=Object.getOwnPropertyDescriptor(P,I):O,U;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(C,P,I,O);else for(var W=C.length-1;W>=0;W--)(U=C[W])&&(M=(k<3?U(M):k>3?U(P,I,M):U(P,I))||M);return k>3&&M&&Object.defineProperty(P,I,M),M}function h(C,P){return function(I,O){P(I,O,C)}}function g(C,P,I,O,k,M){function U(Ct){if(Ct!==void 0&&typeof Ct!="function")throw new TypeError("Function expected");return Ct}for(var W=O.kind,at=W==="getter"?"get":W==="setter"?"set":"value",R=!P&&C?O.static?C:C.prototype:null,Q=P||(R?Object.getOwnPropertyDescriptor(R,O.name):{}),et,q=!1,ot=I.length-1;ot>=0;ot--){var ft={};for(var pt in O)ft[pt]=pt==="access"?{}:O[pt];for(var pt in O.access)ft.access[pt]=O.access[pt];ft.addInitializer=function(Ct){if(q)throw new TypeError("Cannot add initializers after decoration has completed");M.push(U(Ct||null))};var bt=(0,I[ot])(W==="accessor"?{get:Q.get,set:Q.set}:Q[at],ft);if(W==="accessor"){if(bt===void 0)continue;if(bt===null||typeof bt!="object")throw new TypeError("Object expected");(et=U(bt.get))&&(Q.get=et),(et=U(bt.set))&&(Q.set=et),(et=U(bt.init))&&k.push(et)}else(et=U(bt))&&(W==="field"?k.push(et):Q[at]=et)}R&&Object.defineProperty(R,O.name,Q),q=!0}function l(C,P,I){for(var O=arguments.length>2,k=0;k<P.length;k++)I=O?P[k].call(C,I):P[k].call(C);return O?I:void 0}function d(C){return typeof C=="symbol"?C:"".concat(C)}function p(C,P,I){return typeof P=="symbol"&&(P=P.description?"[".concat(P.description,"]"):""),Object.defineProperty(C,"name",{configurable:!0,value:I?"".concat(I," ",P):P})}function f(C,P){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(C,P)}function _(C,P,I,O){function k(M){return M instanceof I?M:new I(function(U){U(M)})}return new(I||(I=Promise))(function(M,U){function W(Q){try{R(O.next(Q))}catch(et){U(et)}}function at(Q){try{R(O.throw(Q))}catch(et){U(et)}}function R(Q){Q.done?M(Q.value):k(Q.value).then(W,at)}R((O=O.apply(C,P||[])).next())})}function j(C,P){var I={label:0,sent:function(){if(M[0]&1)throw M[1];return M[1]},trys:[],ops:[]},O,k,M,U;return U={next:W(0),throw:W(1),return:W(2)},typeof Symbol=="function"&&(U[Symbol.iterator]=function(){return this}),U;function W(R){return function(Q){return at([R,Q])}}function at(R){if(O)throw new TypeError("Generator is already executing.");for(;U&&(U=0,R[0]&&(I=0)),I;)try{if(O=1,k&&(M=R[0]&2?k.return:R[0]?k.throw||((M=k.return)&&M.call(k),0):k.next)&&!(M=M.call(k,R[1])).done)return M;switch(k=0,M&&(R=[R[0]&2,M.value]),R[0]){case 0:case 1:M=R;break;case 4:return I.label++,{value:R[1],done:!1};case 5:I.label++,k=R[1],R=[0];continue;case 7:R=I.ops.pop(),I.trys.pop();continue;default:if(M=I.trys,!(M=M.length>0&&M[M.length-1])&&(R[0]===6||R[0]===2)){I=0;continue}if(R[0]===3&&(!M||R[1]>M[0]&&R[1]<M[3])){I.label=R[1];break}if(R[0]===6&&I.label<M[1]){I.label=M[1],M=R;break}if(M&&I.label<M[2]){I.label=M[2],I.ops.push(R);break}M[2]&&I.ops.pop(),I.trys.pop();continue}R=P.call(C,I)}catch(Q){R=[6,Q],k=0}finally{O=M=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}}var L=Object.create?function(C,P,I,O){O===void 0&&(O=I);var k=Object.getOwnPropertyDescriptor(P,I);(!k||("get"in k?!P.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return P[I]}}),Object.defineProperty(C,O,k)}:function(C,P,I,O){O===void 0&&(O=I),C[O]=P[I]};function B(C,P){for(var I in C)I!=="default"&&!Object.prototype.hasOwnProperty.call(P,I)&&L(P,C,I)}function Z(C){var P=typeof Symbol=="function"&&Symbol.iterator,I=P&&C[P],O=0;if(I)return I.call(C);if(C&&typeof C.length=="number")return{next:function(){return C&&O>=C.length&&(C=void 0),{value:C&&C[O++],done:!C}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(C,P){var I=typeof Symbol=="function"&&C[Symbol.iterator];if(!I)return C;var O=I.call(C),k,M=[],U;try{for(;(P===void 0||P-- >0)&&!(k=O.next()).done;)M.push(k.value)}catch(W){U={error:W}}finally{try{k&&!k.done&&(I=O.return)&&I.call(O)}finally{if(U)throw U.error}}return M}function tt(){for(var C=[],P=0;P<arguments.length;P++)C=C.concat(X(arguments[P]));return C}function ct(){for(var C=0,P=0,I=arguments.length;P<I;P++)C+=arguments[P].length;for(var O=Array(C),k=0,P=0;P<I;P++)for(var M=arguments[P],U=0,W=M.length;U<W;U++,k++)O[k]=M[U];return O}function ht(C,P,I){if(I||arguments.length===2)for(var O=0,k=P.length,M;O<k;O++)(M||!(O in P))&&(M||(M=Array.prototype.slice.call(P,0,O)),M[O]=P[O]);return C.concat(M||Array.prototype.slice.call(P))}function lt(C){return this instanceof lt?(this.v=C,this):new lt(C)}function St(C,P,I){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var O=I.apply(C,P||[]),k,M=[];return k={},U("next"),U("throw"),U("return"),k[Symbol.asyncIterator]=function(){return this},k;function U(q){O[q]&&(k[q]=function(ot){return new Promise(function(ft,pt){M.push([q,ot,ft,pt])>1||W(q,ot)})})}function W(q,ot){try{at(O[q](ot))}catch(ft){et(M[0][3],ft)}}function at(q){q.value instanceof lt?Promise.resolve(q.value.v).then(R,Q):et(M[0][2],q)}function R(q){W("next",q)}function Q(q){W("throw",q)}function et(q,ot){q(ot),M.shift(),M.length&&W(M[0][0],M[0][1])}}function Gt(C){var P,I;return P={},O("next"),O("throw",function(k){throw k}),O("return"),P[Symbol.iterator]=function(){return this},P;function O(k,M){P[k]=C[k]?function(U){return(I=!I)?{value:lt(C[k](U)),done:!1}:M?M(U):U}:M}}function vt(C){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P=C[Symbol.asyncIterator],I;return P?P.call(C):(C=typeof Z=="function"?Z(C):C[Symbol.iterator](),I={},O("next"),O("throw"),O("return"),I[Symbol.asyncIterator]=function(){return this},I);function O(M){I[M]=C[M]&&function(U){return new Promise(function(W,at){U=C[M](U),k(W,at,U.done,U.value)})}}function k(M,U,W,at){Promise.resolve(at).then(function(R){M({value:R,done:W})},U)}}function Nt(C,P){return Object.defineProperty?Object.defineProperty(C,"raw",{value:P}):C.raw=P,C}var Et=Object.create?function(C,P){Object.defineProperty(C,"default",{enumerable:!0,value:P})}:function(C,P){C.default=P};function Lt(C){if(C&&C.__esModule)return C;var P={};if(C!=null)for(var I in C)I!=="default"&&Object.prototype.hasOwnProperty.call(C,I)&&L(P,C,I);return Et(P,C),P}function At(C){return C&&C.__esModule?C:{default:C}}function Zt(C,P,I,O){if(I==="a"&&!O)throw new TypeError("Private accessor was defined without a getter");if(typeof P=="function"?C!==P||!O:!P.has(C))throw new TypeError("Cannot read private member from an object whose class did not declare it");return I==="m"?O:I==="a"?O.call(C):O?O.value:P.get(C)}function be(C,P,I,O,k){if(O==="m")throw new TypeError("Private method is not writable");if(O==="a"&&!k)throw new TypeError("Private accessor was defined without a setter");if(typeof P=="function"?C!==P||!k:!P.has(C))throw new TypeError("Cannot write private member to an object whose class did not declare it");return O==="a"?k.call(C,I):k?k.value=I:P.set(C,I),I}function Yt(C,P){if(P===null||typeof P!="object"&&typeof P!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof C=="function"?P===C:C.has(P)}},878:function(G,u,v){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(u,"__esModule",{value:!0});var A=S(v(325));function b(m,h){return function(){var g=this.traits(),l=this.properties?this.properties():{};return A.default(g,"address."+m)||A.default(g,m)||(h?A.default(g,"address."+h):null)||(h?A.default(g,h):null)||A.default(l,"address."+m)||A.default(l,m)||(h?A.default(l,"address."+h):null)||(h?A.default(l,h):null)}}function E(m){m.zip=b("postalCode","zip"),m.country=b("country"),m.street=b("street"),m.state=b("state"),m.city=b("city"),m.region=b("region")}u.default=E},780:function(G,u,v){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(u,"__esModule",{value:!0}),u.Alias=void 0;var A=S(v(285)),b=v(512);function E(m,h){b.Facade.call(this,m,h)}u.Alias=E,A.default(E,b.Facade),E.prototype.action=function(){return"alias"},E.prototype.type=E.prototype.action,E.prototype.previousId=function(){return this.field("previousId")||this.field("from")},E.prototype.from=E.prototype.previousId,E.prototype.userId=function(){return this.field("userId")||this.field("to")},E.prototype.to=E.prototype.userId},814:(G,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.clone=void 0;function v(S){if(Object.prototype.toString.call(S)==="[object Object]"){var A={};for(var b in S)A[b]=v(S[b]);return A}else return Array.isArray(S)?S.map(v):S}u.clone=v},257:function(G,u,v){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(u,"__esModule",{value:!0}),u.Delete=void 0;var A=S(v(285)),b=v(512);function E(m,h){b.Facade.call(this,m,h)}u.Delete=E,A.default(E,b.Facade),E.prototype.type=function(){return"delete"}},512:function(G,u,v){"use strict";var S=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(u,"__esModule",{value:!0}),u.Facade=void 0;var A=S(v(878)),b=v(814),E=S(v(272)),m=S(v(870)),h=S(v(325)),g=S(v(279));function l(f,_){_=_||{},this.raw=b.clone(f),"clone"in _||(_.clone=!0),_.clone&&(f=b.clone(f)),"traverse"in _||(_.traverse=!0),"timestamp"in f?f.timestamp=m.default(f.timestamp):f.timestamp=new Date,_.traverse&&g.default(f),this.opts=_,this.obj=f}u.Facade=l;var d=l.prototype;d.proxy=function(f){var _=f.split(".");f=_.shift();var j=this[f]||this.field(f);return j&&(typeof j=="function"&&(j=j.call(this)||{}),_.length===0?this.opts.clone?p(j):j:(j=h.default(j,_.join(".")),this.opts.clone?p(j):j))},d.field=function(f){var _=this.obj[f];return this.opts.clone?p(_):_},l.proxy=function(f){return function(){return this.proxy(f)}},l.field=function(f){return function(){return this.field(f)}},l.multi=function(f){return function(){var _=this.proxy(f+"s");if(Array.isArray(_))return _;var j=this.proxy(f);return j&&(j=[this.opts.clone?b.clone(j):j]),j||[]}},l.one=function(f){return function(){var _=this.proxy(f);if(_)return _;var j=this.proxy(f+"s");if(Array.isArray(j))return j[0]}},d.json=function(){var f=this.opts.clone?b.clone(this.obj):this.obj;return this.type&&(f.type=this.type()),f},d.rawEvent=function(){return this.raw},d.options=function(f){var _=this.obj.options||this.obj.context||{},j=this.opts.clone?b.clone(_):_;if(!f)return j;if(this.enabled(f)){var L=this.integrations(),B=L[f]||h.default(L,f);return typeof B!="object"&&(B=h.default(this.options(),f)),typeof B=="object"?B:{}}},d.context=d.options,d.enabled=function(f){var _=this.proxy("options.providers.all");typeof _!="boolean"&&(_=this.proxy("options.all")),typeof _!="boolean"&&(_=this.proxy("integrations.all")),typeof _!="boolean"&&(_=!0);var j=_&&E.default(f),L=this.integrations();if(L.providers&&L.providers.hasOwnProperty(f)&&(j=L.providers[f]),L.hasOwnProperty(f)){var B=L[f];typeof B=="boolean"?j=B:j=!0}return!!j},d.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()},d.active=function(){var f=this.proxy("options.active");return f==null&&(f=!0),f},d.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")},d.sessionId=d.anonymousId,d.groupId=l.proxy("options.groupId"),d.traits=function(f){var _=this.proxy("options.traits")||{},j=this.userId();f=f||{},j&&(_.id=j);for(var L in f){var B=this[L]==null?this.proxy("options.traits."+L):this[L]();B!=null&&(_[f[L]]=B,delete _[L])}return _},d.library=function(){var f=this.proxy("options.library");return f?typeof f=="string"?{name:f,version:null}:f:{name:"unknown",version:null}},d.device=function(){var f=this.proxy("context.device");(typeof f!="object"||f===null)&&(f={});var _=this.library().name;return f.type||(_.indexOf("ios")>-1&&(f.type="ios"),_.indexOf("android")>-1&&(f.type="android")),f},d.userAgent=l.proxy("context.userAgent"),d.timezone=l.proxy("context.timezone"),d.timestamp=l.field("timestamp"),d.channel=l.field("channel"),d.ip=l.proxy("context.ip"),d.userId=l.field("userId"),A.default(d);function p(f){return b.clone(f)}},615:function(G,u,v){"use strict";var S=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(u,"__esModule",{value:!0}),u.Group=void 0;var A=S(v(285)),b=S(v(554)),E=S(v(870)),m=v(512);function h(l,d){m.Facade.call(this,l,d)}u.Group=h,A.default(h,m.Facade);var g=h.prototype;g.action=function(){return"group"},g.type=g.action,g.groupId=m.Facade.field("groupId"),g.created=function(){var l=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(l)return E.default(l)},g.email=function(){var l=this.proxy("traits.email");if(l)return l;var d=this.groupId();if(b.default(d))return d},g.traits=function(l){var d=this.properties(),p=this.groupId();l=l||{},p&&(d.id=p);for(var f in l){var _=this[f]==null?this.proxy("traits."+f):this[f]();_!=null&&(d[l[f]]=_,delete d[f])}return d},g.name=m.Facade.proxy("traits.name"),g.industry=m.Facade.proxy("traits.industry"),g.employees=m.Facade.proxy("traits.employees"),g.properties=function(){return this.field("traits")||this.field("properties")||{}}},705:function(G,u,v){"use strict";var S=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(u,"__esModule",{value:!0}),u.Identify=void 0;var A=v(512),b=S(v(325)),E=S(v(285)),m=S(v(554)),h=S(v(870)),g=function(p){return p.trim()};function l(p,f){A.Facade.call(this,p,f)}u.Identify=l,E.default(l,A.Facade);var d=l.prototype;d.action=function(){return"identify"},d.type=d.action,d.traits=function(p){var f=this.field("traits")||{},_=this.userId();p=p||{},_&&(f.id=_);for(var j in p){var L=this[j]==null?this.proxy("traits."+j):this[j]();L!=null&&(f[p[j]]=L,j!==p[j]&&delete f[j])}return f},d.email=function(){var p=this.proxy("traits.email");if(p)return p;var f=this.userId();if(m.default(f))return f},d.created=function(){var p=this.proxy("traits.created")||this.proxy("traits.createdAt");if(p)return h.default(p)},d.companyCreated=function(){var p=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(p)return h.default(p)},d.companyName=function(){return this.proxy("traits.company.name")},d.name=function(){var p=this.proxy("traits.name");if(typeof p=="string")return g(p);var f=this.firstName(),_=this.lastName();if(f&&_)return g(f+" "+_)},d.firstName=function(){var p=this.proxy("traits.firstName");if(typeof p=="string")return g(p);var f=this.proxy("traits.name");if(typeof f=="string")return g(f).split(" ")[0]},d.lastName=function(){var p=this.proxy("traits.lastName");if(typeof p=="string")return g(p);var f=this.proxy("traits.name");if(typeof f=="string"){var _=g(f).indexOf(" ");if(_!==-1)return g(f.substr(_+1))}},d.uid=function(){return this.userId()||this.username()||this.email()},d.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")},d.age=function(){var p=this.birthday(),f=b.default(this.traits(),"age");if(f!=null)return f;if(p instanceof Date){var _=new Date;return _.getFullYear()-p.getFullYear()}},d.avatar=function(){var p=this.traits();return b.default(p,"avatar")||b.default(p,"photoUrl")||b.default(p,"avatarUrl")},d.position=function(){var p=this.traits();return b.default(p,"position")||b.default(p,"jobTitle")},d.username=A.Facade.proxy("traits.username"),d.website=A.Facade.one("traits.website"),d.websites=A.Facade.multi("traits.website"),d.phone=A.Facade.one("traits.phone"),d.phones=A.Facade.multi("traits.phone"),d.address=A.Facade.proxy("traits.address"),d.gender=A.Facade.proxy("traits.gender"),d.birthday=A.Facade.proxy("traits.birthday")},122:function(G,u,v){"use strict";var S=this&&this.__assign||function(){return S=Object.assign||function(p){for(var f,_=1,j=arguments.length;_<j;_++){f=arguments[_];for(var L in f)Object.prototype.hasOwnProperty.call(f,L)&&(p[L]=f[L])}return p},S.apply(this,arguments)};Object.defineProperty(u,"__esModule",{value:!0}),u.Delete=u.Screen=u.Page=u.Track=u.Identify=u.Group=u.Alias=u.Facade=void 0;var A=v(512);Object.defineProperty(u,"Facade",{enumerable:!0,get:function(){return A.Facade}});var b=v(780);Object.defineProperty(u,"Alias",{enumerable:!0,get:function(){return b.Alias}});var E=v(615);Object.defineProperty(u,"Group",{enumerable:!0,get:function(){return E.Group}});var m=v(705);Object.defineProperty(u,"Identify",{enumerable:!0,get:function(){return m.Identify}});var h=v(480);Object.defineProperty(u,"Track",{enumerable:!0,get:function(){return h.Track}});var g=v(926);Object.defineProperty(u,"Page",{enumerable:!0,get:function(){return g.Page}});var l=v(207);Object.defineProperty(u,"Screen",{enumerable:!0,get:function(){return l.Screen}});var d=v(257);Object.defineProperty(u,"Delete",{enumerable:!0,get:function(){return d.Delete}}),u.default=S(S({},A.Facade),{Alias:b.Alias,Group:E.Group,Identify:m.Identify,Track:h.Track,Page:g.Page,Screen:l.Screen,Delete:d.Delete})},554:(G,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var v=/.+\@.+\..+/;function S(A){return v.test(A)}u.default=S},272:(G,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var v={Salesforce:!0};function S(A){return!v[A]}u.default=S},926:function(G,u,v){"use strict";var S=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(u,"__esModule",{value:!0}),u.Page=void 0;var A=S(v(285)),b=v(512),E=v(480),m=S(v(554));function h(l,d){b.Facade.call(this,l,d)}u.Page=h,A.default(h,b.Facade);var g=h.prototype;g.action=function(){return"page"},g.type=g.action,g.category=b.Facade.field("category"),g.name=b.Facade.field("name"),g.title=b.Facade.proxy("properties.title"),g.path=b.Facade.proxy("properties.path"),g.url=b.Facade.proxy("properties.url"),g.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},g.properties=function(l){var d=this.field("properties")||{},p=this.category(),f=this.name();l=l||{},p&&(d.category=p),f&&(d.name=f);for(var _ in l){var j=this[_]==null?this.proxy("properties."+_):this[_]();j!=null&&(d[l[_]]=j,_!==l[_]&&delete d[_])}return d},g.email=function(){var l=this.proxy("context.traits.email")||this.proxy("properties.email");if(l)return l;var d=this.userId();if(m.default(d))return d},g.fullName=function(){var l=this.category(),d=this.name();return d&&l?l+" "+d:d},g.event=function(l){return l?"Viewed "+l+" Page":"Loaded a Page"},g.track=function(l){var d=this.json();return d.event=this.event(l),d.timestamp=this.timestamp(),d.properties=this.properties(),new E.Track(d,this.opts)}},207:function(G,u,v){"use strict";var S=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(u,"__esModule",{value:!0}),u.Screen=void 0;var A=S(v(285)),b=v(926),E=v(480);function m(h,g){b.Page.call(this,h,g)}u.Screen=m,A.default(m,b.Page),m.prototype.action=function(){return"screen"},m.prototype.type=m.prototype.action,m.prototype.event=function(h){return h?"Viewed "+h+" Screen":"Loaded a Screen"},m.prototype.track=function(h){var g=this.json();return g.event=this.event(h),g.timestamp=this.timestamp(),g.properties=this.properties(),new E.Track(g,this.opts)}},480:function(G,u,v){"use strict";var S=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(u,"__esModule",{value:!0}),u.Track=void 0;var A=S(v(285)),b=v(512),E=v(705),m=S(v(554)),h=S(v(325));function g(p,f){b.Facade.call(this,p,f)}u.Track=g,A.default(g,b.Facade);var l=g.prototype;l.action=function(){return"track"},l.type=l.action,l.event=b.Facade.field("event"),l.value=b.Facade.proxy("properties.value"),l.category=b.Facade.proxy("properties.category"),l.id=b.Facade.proxy("properties.id"),l.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")},l.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")},l.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")},l.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")},l.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")},l.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")},l.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")},l.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")},l.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")},l.sku=b.Facade.proxy("properties.sku"),l.tax=b.Facade.proxy("properties.tax"),l.name=b.Facade.proxy("properties.name"),l.price=b.Facade.proxy("properties.price"),l.total=b.Facade.proxy("properties.total"),l.repeat=b.Facade.proxy("properties.repeat"),l.coupon=b.Facade.proxy("properties.coupon"),l.shipping=b.Facade.proxy("properties.shipping"),l.discount=b.Facade.proxy("properties.discount"),l.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")},l.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")},l.description=b.Facade.proxy("properties.description"),l.plan=b.Facade.proxy("properties.plan"),l.subtotal=function(){var p=h.default(this.properties(),"subtotal"),f=this.total()||this.revenue();if(p)return p;if(!f)return 0;if(this.total()){var _=this.tax();_&&(f-=_),_=this.shipping(),_&&(f-=_),_=this.discount(),_&&(f+=_)}return f},l.products=function(){var p=this.properties(),f=h.default(p,"products");return Array.isArray(f)?f.filter(function(_){return _!==null}):[]},l.quantity=function(){var p=this.obj.properties||{};return p.quantity||1},l.currency=function(){var p=this.obj.properties||{};return p.currency||"USD"},l.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},l.query=b.Facade.proxy("options.query"),l.properties=function(p){var f=this.field("properties")||{};p=p||{};for(var _ in p){var j=this[_]==null?this.proxy("properties."+_):this[_]();j!=null&&(f[p[_]]=j,delete f[_])}return f},l.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()},l.email=function(){var p=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(p)return p;var f=this.userId();if(m.default(f))return f},l.revenue=function(){var p=this.proxy("properties.revenue"),f=this.event(),_=/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;return!p&&f&&f.match(_)&&(p=this.proxy("properties.total")),d(p)},l.cents=function(){var p=this.revenue();return typeof p!="number"?this.value()||0:p*100},l.identify=function(){var p=this.json();return p.traits=this.traits(),new E.Identify(p,this.opts)};function d(p){if(p){if(typeof p=="number")return p;if(typeof p=="string"&&(p=p.replace(/\$/g,""),p=parseFloat(p),!isNaN(p)))return p}}},279:(G,u,v)=>{"use strict";var S=v(264);G.exports=A;function A(m,h){return h===void 0&&(h=!0),m&&typeof m=="object"?b(m,h):Array.isArray(m)?E(m,h):S.is(m,h)?S.parse(m):m}function b(m,h){return Object.keys(m).forEach(function(g){m[g]=A(m[g],h)}),m}function E(m,h){return m.forEach(function(g,l){m[l]=A(g,h)}),m}},264:(G,u)=>{"use strict";var v=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;u.parse=function(S){var A=[1,5,6,7,11,12],b=v.exec(S),E=0;if(!b)return new Date(S);for(var m=0,h;h=A[m];m++)b[h]=parseInt(b[h],10)||0;b[2]=parseInt(b[2],10)||1,b[3]=parseInt(b[3],10)||1,b[2]--,b[8]=b[8]?(b[8]+"00").substring(0,3):0,b[4]===" "?E=new Date().getTimezoneOffset():b[9]!=="Z"&&b[10]&&(E=b[11]*60+b[12],b[10]==="+"&&(E=0-E));var g=Date.UTC(b[1],b[2],b[3],b[5],b[6]+E,b[7],b[8]);return new Date(g)},u.is=function(S,A){return typeof S!="string"||A&&/^\d{4}-\d{2}-\d{2}/.test(S)===!1?!1:v.test(S)}},168:(G,u,v)=>{"use strict";v.d(u,{N:()=>S});function S(A,b,E){b.split&&(b=b.split("."));for(var m=0,h=b.length,g=A,l,d;m<h&&(d=""+b[m++],!(d==="__proto__"||d==="constructor"||d==="prototype"));)g=g[d]=m===h?E:typeof(l=g[d])==typeof b?l:b[m]*0!==0||~(""+b[m]).indexOf(".")?{}:[]}},131:()=>{},844:()=>{},285:G=>{typeof Object.create=="function"?G.exports=function(v,S){S&&(v.super_=S,v.prototype=Object.create(S.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}))}:G.exports=function(v,S){if(S){v.super_=S;var A=function(){};A.prototype=S.prototype,v.prototype=new A,v.prototype.constructor=v}}},870:(G,u,v)=>{"use strict";var S=v(264),A=v(893),b=v(76),E=Object.prototype,m=E.toString;function h(d){return m.call(d)==="[object Date]"}function g(d){return m.call(d)==="[object Number]"}G.exports=function(p){return h(p)?p:g(p)?new Date(l(p)):S.is(p)?S.parse(p):A.is(p)?A.parse(p):b.is(p)?b.parse(p):new Date(p)};function l(d){return d<315576e5?d*1e3:d}},893:(G,u)=>{"use strict";var v=/\d{13}/;u.is=function(S){return v.test(S)},u.parse=function(S){return S=parseInt(S,10),new Date(S)}},76:(G,u)=>{"use strict";var v=/\d{10}/;u.is=function(S){return v.test(S)},u.parse=function(S){var A=parseInt(S,10)*1e3;return new Date(A)}},325:G=>{var u=function(h){return h};G.exports=v(S),G.exports.find=G.exports,G.exports.replace=function(h,g,l,d){return v(b).call(this,h,g,l,d),h},G.exports.del=function(h,g,l){return v(A).call(this,h,g,null,l),h};function v(h){return function(g,l,d,p){var f=p&&m(p.normalizer)?p.normalizer:E;l=f(l);for(var _,j=!1;!j;)L();function L(){for(_ in g){var B=f(_);if(l.indexOf(B)===0){var Z=l.substr(B.length);if(Z.charAt(0)==="."||Z.length===0){l=Z.substr(1);var X=g[_];if(X==null){j=!0;return}if(!l.length){j=!0;return}g=X;return}}}_=void 0,j=!0}if(_)return g==null?g:h(g,_,d)}}function S(h,g){if(h.hasOwnProperty(g))return h[g]}function A(h,g){return h.hasOwnProperty(g)&&delete h[g],h}function b(h,g,l){return h.hasOwnProperty(g)&&(h[g]=l),h}function E(h){return h.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}function m(h){return typeof h=="function"}}},_e={};function H(G){var u=_e[G];if(u!==void 0)return u.exports;var v=_e[G]={exports:{}};return hr[G].call(v.exports,v,v.exports,H),v.exports}H.n=G=>{var u=G&&G.__esModule?()=>G.default:()=>G;return H.d(u,{a:u}),u},H.d=(G,u)=>{for(var v in u)H.o(u,v)&&!H.o(G,v)&&Object.defineProperty(G,v,{enumerable:!0,get:u[v]})},H.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(G){if(typeof window=="object")return window}}(),H.o=(G,u)=>Object.prototype.hasOwnProperty.call(G,u),H.r=G=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(G,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(G,"__esModule",{value:!0})};var Mi={};(()=>{"use strict";const G=()=>{const n={Firefox:46,Edge:13},t=!!window.MSInputMethodContext&&!!document.documentMode,e=navigator.userAgent.split(" "),[r,i]=e[e.length-1].split("/");return t||n[r]!==void 0&&n[r]>=parseInt(i)};var u=H(95),v=H(143);function S(n,t,e,r){var i,o=[n,t,e,r],a=(0,v.PO)(n)?n.event:n;if(!a||!(0,v.HD)(a))throw new Error("Event missing");var s=(0,v.PO)(n)?(i=n.properties)!==null&&i!==void 0?i:{}:(0,v.PO)(t)?t:{},c={};(0,v.mf)(e)||(c=e!=null?e:{}),(0,v.PO)(n)&&!(0,v.mf)(t)&&(c=t!=null?t:{});var y=o.find(v.mf);return[a,s,c,y]}function A(n,t,e,r,i){var o,a,s=null,c=null,y=[n,t,e,r,i],w=y.filter(v.HD);w[0]!==void 0&&w[1]!==void 0&&(s=w[0],c=w[1]),w.length===1&&(s=null,c=w[0]);var D=y.find(v.mf),x=y.filter(function(N){return c===null?(0,v.PO)(N):(0,v.PO)(N)||N===null}),F=(o=x[0])!==null&&o!==void 0?o:{},T=(a=x[1])!==null&&a!==void 0?a:{};return[s,c,F,T,D]}var b=function(n){return function(){for(var t,e,r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];for(var a={},s=["callback","options","traits","id"],c=0,y=i;c<y.length;c++){var w=y[c],D=s.pop();if(D==="id"){if((0,v.HD)(w)||(0,v.hj)(w)){a.id=w.toString();continue}if(w==null)continue;D=s.pop()}if((D==="traits"||D==="options")&&(w==null||(0,v.PO)(w))&&(a[D]=w),(0,v.mf)(w)){a.callback=w;break}}return[(t=a.id)!==null&&t!==void 0?t:n.id(),(e=a.traits)!==null&&e!==void 0?e:{},(r=a.options)!==null&&r!==void 0?r:{},a.callback]}};function E(n,t,e,r){(0,v.hj)(n)&&(n=n.toString()),(0,v.hj)(t)&&(t=t.toString());var i=[n,t,e,r],o=i.filter(v.HD),a=o[0],s=a===void 0?n:a,c=o[1],y=c===void 0?null:c,w=i.filter(v.PO)[0],D=w===void 0?{}:w,x=i.find(v.mf);return[s,y,D,x]}function m(){return typeof window!="undefined"}function h(){return!m()}function g(){return m()?window.navigator.onLine:!0}function l(){return!g()}var d=H(137),p=H(61);function f(n,t){return t=t||{},new Promise(function(e,r){var i=new XMLHttpRequest,o=[],a=[],s={},c=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:c,headers:{keys:function(){return o},entries:function(){return a},get:function(w){return s[w.toLowerCase()]},has:function(w){return w.toLowerCase()in s}}}};for(var y in i.open(t.method||"get",n,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(w,D,x){o.push(D=D.toLowerCase()),a.push([D,x]),s[D]=s[D]?s[D]+","+x:x}),e(c())},i.onerror=r,i.withCredentials=t.credentials=="include",t.headers)i.setRequestHeader(y,t.headers[y]);i.send(t.body||null)})}var _=function(){return typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof H.g!="undefined"?H.g:null},j=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=_();return(e&&e.fetch||f).apply(void 0,n)},L="1.76.0",B="npm";function Z(n){B=n}function X(){return B}var tt="api.segment.io/v1",ct=function(n,t,e){var r=t.reduce(function(i,o){var a=o.split(":"),s=a[0],c=a[1];return i[s]=c,i},{});return{type:"Counter",metric:n,value:1,tags:(0,u.pi)((0,u.pi)({},r),{library:"analytics.js",library_version:e==="web"?"next-".concat(L):"npm:next-".concat(L)})}};function ht(n){console.error("Error sending segment performance metrics",n)}var lt=function(){function n(t){var e=this,r,i,o,a,s;if(this.host=(r=t==null?void 0:t.host)!==null&&r!==void 0?r:tt,this.sampleRate=(i=t==null?void 0:t.sampleRate)!==null&&i!==void 0?i:1,this.flushTimer=(o=t==null?void 0:t.flushTimer)!==null&&o!==void 0?o:30*1e3,this.maxQueueSize=(a=t==null?void 0:t.maxQueueSize)!==null&&a!==void 0?a:20,this.protocol=(s=t==null?void 0:t.protocol)!==null&&s!==void 0?s:"https",this.queue=[],this.sampleRate>0){var c=!1,y=function(){c||(c=!0,e.flush().catch(ht),c=!1,setTimeout(y,e.flushTimer))};y()}}return n.prototype.increment=function(t,e){if(t.includes("analytics_js.")&&e.length!==0&&!(Math.random()>this.sampleRate)&&!(this.queue.length>=this.maxQueueSize)){var r=ct(t,e,X());this.queue.push(r),t.includes("error")&&this.flush().catch(ht)}},n.prototype.flush=function(){return(0,u.mG)(this,void 0,void 0,function(){var t=this;return(0,u.Jh)(this,function(e){switch(e.label){case 0:return this.queue.length<=0?[2]:[4,this.send().catch(function(r){ht(r),t.sampleRate=0})];case 1:return e.sent(),[2]}})})},n.prototype.send=function(){return(0,u.mG)(this,void 0,void 0,function(){var t,e,r;return(0,u.Jh)(this,function(i){return t={series:this.queue},this.queue=[],e={"Content-Type":"text/plain"},r="".concat(this.protocol,"://").concat(this.host,"/m"),[2,j(r,{headers:e,body:JSON.stringify(t),method:"POST"})]})})},n}(),St,Gt=function(n){(0,u.ZT)(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.initRemoteMetrics=function(e){St=new lt(e)},t.prototype.increment=function(e,r,i){n.prototype.increment.call(this,e,r,i),St==null||St.increment(e,i!=null?i:[])},t}(p.s),vt=function(n){(0,u.ZT)(t,n);function t(e,r){return n.call(this,e,r,new Gt)||this}return t.system=function(){return new this({type:"track",event:"system"})},t}(d._),Nt=H(194),Et=function(n,t){var e=Date.now()-n;return Math.max((t!=null?t:300)-e,0)};function Lt(n,t,e,r){return(0,u.mG)(this,void 0,void 0,function(){var i,o;return(0,u.Jh)(this,function(a){switch(a.label){case 0:return e.emit("dispatch_start",n),i=Date.now(),t.isEmpty()?[4,t.dispatchSingle(n)]:[3,2];case 1:return o=a.sent(),[3,4];case 2:return[4,t.dispatch(n)];case 3:o=a.sent(),a.label=4;case 4:return r!=null&&r.callback?[4,(0,Nt.UI)(o,r.callback,Et(i,r.timeout))]:[3,6];case 5:o=a.sent(),a.label=6;case 6:return r!=null&&r.debug&&o.flush(),[2,o]}})})}var At=function(){function n(t){var e;this.callbacks={},this.warned=!1,this.maxListeners=(e=t==null?void 0:t.maxListeners)!==null&&e!==void 0?e:10}return n.prototype.warnIfPossibleMemoryLeak=function(t){this.warned||this.maxListeners&&this.callbacks[t].length>this.maxListeners&&(console.warn("Event Emitter: Possible memory leak detected; ".concat(String(t)," has exceeded ").concat(this.maxListeners," listeners.")),this.warned=!0)},n.prototype.on=function(t,e){return this.callbacks[t]?(this.callbacks[t].push(e),this.warnIfPossibleMemoryLeak(t)):this.callbacks[t]=[e],this},n.prototype.once=function(t,e){var r=this,i=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];r.off(t,i),e.apply(r,o)};return this.on(t,i),this},n.prototype.off=function(t,e){var r,i=(r=this.callbacks[t])!==null&&r!==void 0?r:[],o=i.filter(function(a){return a!==e});return this.callbacks[t]=o,this},n.prototype.emit=function(t){for(var e=this,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var a=(r=this.callbacks[t])!==null&&r!==void 0?r:[];return a.forEach(function(s){s.apply(e,i)}),this},n}(),Zt=H(228);function be(n,t){return Object.assign.apply(Object,(0,u.ev)([{}],t.map(function(e){var r;if(n&&Object.prototype.hasOwnProperty.call(n,e))return r={},r[e]=n[e],r}),!1))}var Yt="bpc",C=function(n,t,e,r,i,o){return{__t:Yt,c:t,p:r,u:n,s:e,t:i,r:o}},P=Object.keys(C("","","","","",""));function I(n){if(!(0,v.PO)(n)||n.__t!==Yt)return!1;for(var t in n)if(!P.includes(t))return!1;return!0}var O=function(n,t){return n.indexOf("?")>-1?n:n+t},k=function(n){var t=n.indexOf("#");return t===-1?n:n.slice(0,t)},M=function(n){try{return new URL(n).pathname}catch(t){return n[0]==="/"?n:"/"+n}},U=function(n){var t=n.c,e=n.p,r=n.s,i=n.u,o=n.r,a=n.t,s=t?M(t):e,c=t?O(t,r):k(i);return{path:s,referrer:o,search:r,title:a,url:c}},W=function(){var n=document.querySelector("link[rel='canonical']");return C(location.href,n&&n.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},at=function(){return U(W())},R=function(n,t){t===void 0&&(t=at());var e=n.context,r;n.type==="page"&&(r=n.properties&&be(n.properties,Object.keys(t)),n.properties=(0,u.pi)((0,u.pi)((0,u.pi)({},t),n.properties),n.name?{name:n.name}:{})),e.page=(0,u.pi)((0,u.pi)((0,u.pi)({},t),r),e.page)},Q=H(168),et=function(n,t){return Object.keys(n).filter(function(e){return t(e,n[e])}).reduce(function(e,r){return e[r]=n[r],e},{})},q=function(n){(0,u.ZT)(t,n);function t(e,r){var i=n.call(this,"".concat(e," ").concat(r))||this;return i.field=e,i}return t}(Error),ot="is not a string",ft="is not an object",pt="is nil";function bt(n){var t=".userId/anonymousId/previousId/groupId",e=function(i){var o,a,s;return(s=(a=(o=i.userId)!==null&&o!==void 0?o:i.anonymousId)!==null&&a!==void 0?a:i.groupId)!==null&&s!==void 0?s:i.previousId},r=e(n);if(exists(r)){if(!isString(r))throw new ValidationError(t,ot)}else throw new ValidationError(t,pt)}function Ct(n){if(!(0,v.Gg)(n))throw new q("Event",pt);if(typeof n!="object")throw new q("Event",ft)}function vr(n){if(!(0,v.HD)(n.type))throw new q(".type",ot)}function pr(n){if(!(0,v.HD)(n.event))throw new q(".event",ot)}function yr(n){if(!(0,v.PO)(n.properties))throw new q(".properties",ft)}function gr(n){if(!(0,v.PO)(n.traits))throw new q(".traits",ft)}function mr(n){if(!(0,v.HD)(n.messageId))throw new q(".messageId",ot)}function _r(n){Ct(n),vr(n),mr(n),n.type==="track"&&(pr(n),yr(n)),["group","identify"].includes(n.type)&&gr(n)}var br=function(){function n(t){var e,r;this.settings=t,this.createMessageId=t.createMessageId,this.onEventMethodCall=(e=t.onEventMethodCall)!==null&&e!==void 0?e:function(){},this.onFinishedEvent=(r=t.onFinishedEvent)!==null&&r!==void 0?r:function(){}}return n}(),wr=function(){function n(t){this.settings=new br(t)}return n.prototype.track=function(t,e,r,i){return this.settings.onEventMethodCall({type:"track",options:r}),this.normalize((0,u.pi)((0,u.pi)({},this.baseEvent()),{event:t,type:"track",properties:e!=null?e:{},options:(0,u.pi)({},r),integrations:(0,u.pi)({},i)}))},n.prototype.page=function(t,e,r,i,o){var a;this.settings.onEventMethodCall({type:"page",options:i});var s={type:"page",properties:(0,u.pi)({},r),options:(0,u.pi)({},i),integrations:(0,u.pi)({},o)};return t!==null&&(s.category=t,s.properties=(a=s.properties)!==null&&a!==void 0?a:{},s.properties.category=t),e!==null&&(s.name=e),this.normalize((0,u.pi)((0,u.pi)({},this.baseEvent()),s))},n.prototype.screen=function(t,e,r,i,o){this.settings.onEventMethodCall({type:"screen",options:i});var a={type:"screen",properties:(0,u.pi)({},r),options:(0,u.pi)({},i),integrations:(0,u.pi)({},o)};return t!==null&&(a.category=t),e!==null&&(a.name=e),this.normalize((0,u.pi)((0,u.pi)({},this.baseEvent()),a))},n.prototype.identify=function(t,e,r,i){return this.settings.onEventMethodCall({type:"identify",options:r}),this.normalize((0,u.pi)((0,u.pi)({},this.baseEvent()),{type:"identify",userId:t,traits:e!=null?e:{},options:(0,u.pi)({},r),integrations:i}))},n.prototype.group=function(t,e,r,i){return this.settings.onEventMethodCall({type:"group",options:r}),this.normalize((0,u.pi)((0,u.pi)({},this.baseEvent()),{type:"group",traits:e!=null?e:{},options:(0,u.pi)({},r),integrations:(0,u.pi)({},i),groupId:t}))},n.prototype.alias=function(t,e,r,i){this.settings.onEventMethodCall({type:"alias",options:r});var o={userId:t,type:"alias",options:(0,u.pi)({},r),integrations:(0,u.pi)({},i)};return e!==null&&(o.previousId=e),t===void 0?this.normalize((0,u.pi)((0,u.pi)({},o),this.baseEvent())):this.normalize((0,u.pi)((0,u.pi)({},this.baseEvent()),o))},n.prototype.baseEvent=function(){return{integrations:{},options:{}}},n.prototype.context=function(t){var e,r=["userId","anonymousId","timestamp","messageId"];delete t.integrations;var i=Object.keys(t),o=(e=t.context)!==null&&e!==void 0?e:{},a={};return i.forEach(function(s){s!=="context"&&(r.includes(s)?(0,Q.N)(a,s,t[s]):(0,Q.N)(o,s,t[s]))}),[o,a]},n.prototype.normalize=function(t){var e,r,i=Object.keys((e=t.integrations)!==null&&e!==void 0?e:{}).reduce(function(x,F){var T,N;return(0,u.pi)((0,u.pi)({},x),(T={},T[F]=!!(!((N=t.integrations)===null||N===void 0)&&N[F]),T))},{});t.options=et(t.options||{},function(x,F){return F!==void 0});var o=(0,u.pi)((0,u.pi)({},i),(r=t.options)===null||r===void 0?void 0:r.integrations),a=t.options?this.context(t.options):[],s=a[0],c=a[1],y=t.options,w=(0,u._T)(t,["options"]),D=(0,u.pi)((0,u.pi)((0,u.pi)((0,u.pi)({timestamp:new Date},w),{context:s,integrations:o}),c),{messageId:y.messageId||this.settings.createMessageId()});return this.settings.onFinishedEvent(D),_r(D),D},n}(),Sr=function(n){(0,u.ZT)(t,n);function t(e){var r=n.call(this,{createMessageId:function(){return"".concat(Date.now(),"-").concat((0,Zt.v4)())},onEventMethodCall:function(i){var o=i.options;r.maybeUpdateAnonId(o)},onFinishedEvent:function(i){return r.addIdentity(i),i}})||this;return r.user=e,r}return t.prototype.maybeUpdateAnonId=function(e){e!=null&&e.anonymousId&&this.user.anonymousId(e.anonymousId)},t.prototype.addIdentity=function(e){this.user.id()&&(e.userId=this.user.id()),this.user.anonymousId()&&(e.anonymousId=this.user.anonymousId())},t.prototype.track=function(e,r,i,o,a){var s=n.prototype.track.call(this,e,r,i,o);return R(s,a),s},t.prototype.page=function(e,r,i,o,a,s){var c=n.prototype.page.call(this,e,r,i,o,a);return R(c,s),c},t.prototype.screen=function(e,r,i,o,a,s){var c=n.prototype.screen.call(this,e,r,i,o,a);return R(c,s),c},t.prototype.identify=function(e,r,i,o,a){var s=n.prototype.identify.call(this,e,r,i,o);return R(s,a),s},t.prototype.group=function(e,r,i,o,a){var s=n.prototype.group.call(this,e,r,i,o);return R(s,a),s},t.prototype.alias=function(e,r,i,o,a){var s=n.prototype.alias.call(this,e,r,i,o);return R(s,a),s},t}(wr),Cr=function(n){return"addMiddleware"in n&&n.type==="destination"};function Pr(n){var t=Math.random()+1,e=n.minTimeout,r=e===void 0?500:e,i=n.factor,o=i===void 0?2:i,a=n.attempt,s=n.maxTimeout,c=s===void 0?1/0:s;return Math.min(t*r*Math.pow(o,a),c)}var we="onRemoveFromFuture",$t=function(n){(0,u.ZT)(t,n);function t(e,r,i){var o=n.call(this)||this;return o.future=[],o.maxAttempts=e,o.queue=r,o.seen=i!=null?i:{},o}return t.prototype.push=function(){for(var e=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=r.map(function(a){var s=e.updateAttempts(a);return s>e.maxAttempts||e.includes(a)?!1:(e.queue.push(a),!0)});return this.queue=this.queue.sort(function(a,s){return e.getAttempts(a)-e.getAttempts(s)}),o},t.prototype.pushWithBackoff=function(e,r){var i=this;if(r===void 0&&(r=0),r==0&&this.getAttempts(e)===0)return this.push(e)[0];var o=this.updateAttempts(e);if(o>this.maxAttempts||this.includes(e))return!1;var a=Pr({attempt:o-1});return r>0&&a<r&&(a=r),setTimeout(function(){i.queue.push(e),i.future=i.future.filter(function(s){return s.id!==e.id}),i.emit(we)},a),this.future.push(e),!0},t.prototype.getAttempts=function(e){var r;return(r=this.seen[e.id])!==null&&r!==void 0?r:0},t.prototype.updateAttempts=function(e){return this.seen[e.id]=this.getAttempts(e)+1,this.getAttempts(e)},t.prototype.includes=function(e){return this.queue.includes(e)||this.future.includes(e)||!!this.queue.find(function(r){return r.id===e.id})||!!this.future.find(function(r){return r.id===e.id})},t.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(t.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),t}(At),gt={getItem:function(){},setItem:function(){},removeItem:function(){}};try{gt=m()&&window.localStorage?window.localStorage:gt}catch(n){console.warn("Unable to access localStorage",n)}function Se(n){var t=gt.getItem(n);return(t?JSON.parse(t):[]).map(function(e){return new vt(e.event,e.id)})}function Ir(n,t){var e=Se(n),r=(0,u.ev)((0,u.ev)([],t,!0),e,!0),i=r.reduce(function(o,a){var s;return(0,u.pi)((0,u.pi)({},o),(s={},s[a.id]=a,s))},{});gt.setItem(n,JSON.stringify(Object.values(i)))}function Ce(n){var t=gt.getItem(n);return t?JSON.parse(t):{}}function Or(n,t){var e=Ce(n);gt.setItem(n,JSON.stringify((0,u.pi)((0,u.pi)({},e),t)))}function Pe(n){gt.removeItem(n)}var Er=function(){return new Date().getTime()};function Xt(n,t,e){e===void 0&&(e=0);var r=50,i="persisted-queue:v1:".concat(n,":lock"),o=function(y){return new Date().getTime()>y},a=gt.getItem(i),s=a?JSON.parse(a):null,c=s===null||o(s);if(c){gt.setItem(i,JSON.stringify(Er()+r)),t(),gt.removeItem(i);return}!c&&e<3?setTimeout(function(){Xt(n,t,e+1)},r):console.error("Unable to retrieve lock")}var Rt=function(n){(0,u.ZT)(t,n);function t(e,r){var i=n.call(this,e,[])||this,o="persisted-queue:v1:".concat(r,":items"),a="persisted-queue:v1:".concat(r,":seen"),s=[],c={};return Xt(r,function(){try{s=Se(o),c=Ce(a),Pe(o),Pe(a),i.queue=(0,u.ev)((0,u.ev)([],s,!0),i.queue,!0),i.seen=(0,u.pi)((0,u.pi)({},c),i.seen)}catch(y){console.error(y)}}),window.addEventListener("pagehide",function(){if(i.todo>0){var y=(0,u.ev)((0,u.ev)([],i.queue,!0),i.future,!0);try{Xt(r,function(){Ir(o,y),Or(a,i.seen)})}catch(w){console.error(w)}}}),i}return t}($t);function Ar(n,t){var e={};return n.forEach(function(r){var i,o=void 0;if(typeof t=="string"){var a=r[t];o=typeof a!="string"?JSON.stringify(a):a}else t instanceof Function&&(o=t(r));o!==void 0&&(e[o]=(0,u.ev)((0,u.ev)([],(i=e[o])!==null&&i!==void 0?i:[],!0),[r],!1))}),e}var Dr=function(n){return typeof n=="object"&&n!==null&&"then"in n&&typeof n.then=="function"},jr=function(){var n,t,e=0;return{done:function(){return n},run:function(r){var i=r();return Dr(i)&&(++e===1&&(n=new Promise(function(o){return t=o})),i.finally(function(){return--e===0&&t()})),i}}};function Mr(n){return(0,u.mG)(this,void 0,void 0,function(){var t;return(0,u.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,n()];case 1:return[2,e.sent()];case 2:return t=e.sent(),[2,Promise.reject(t)];case 3:return[2]}})})}function Dt(n,t){n.log("debug","plugin",{plugin:t.name});var e=new Date().getTime(),r=t[n.event.type];if(r===void 0)return Promise.resolve(n);var i=Mr(function(){return r.apply(t,[n])}).then(function(o){var a=new Date().getTime()-e;return o.stats.gauge("plugin_time",a,["plugin:".concat(t.name)]),o}).catch(function(o){if(o instanceof d.Y&&o.type==="middleware_cancellation")throw o;return o instanceof d.Y?(n.log("warn",o.type,{plugin:t.name,error:o}),o):(n.log("error","plugin Error",{plugin:t.name,error:o}),n.stats.increment("plugin_error",1,["plugin:".concat(t.name)]),o)});return i}function Tr(n,t){return Dt(n,t).then(function(e){if(e instanceof d._)return e;n.log("debug","Context canceled"),n.stats.increment("context_canceled"),n.cancel(e)})}var kr=function(n){(0,u.ZT)(t,n);function t(e){var r=n.call(this)||this;return r.criticalTasks=jr(),r.plugins=[],r.failedInitializations=[],r.flushing=!1,r.queue=e,r.queue.on(we,function(){r.scheduleFlush(0)}),r}return t.prototype.register=function(e,r,i){return(0,u.mG)(this,void 0,void 0,function(){var o,a,s=this;return(0,u.Jh)(this,function(c){switch(c.label){case 0:return this.plugins.push(r),o=function(y){s.failedInitializations.push(r.name),s.emit("initialization_failure",r),console.warn(r.name,y),e.log("warn","Failed to load destination",{plugin:r.name,error:y}),s.plugins=s.plugins.filter(function(w){return w!==r})},r.type==="destination"&&r.name!=="Segment.io"?(r.load(e,i).catch(o),[3,4]):[3,1];case 1:return c.trys.push([1,3,,4]),[4,r.load(e,i)];case 2:return c.sent(),[3,4];case 3:return a=c.sent(),o(a),[3,4];case 4:return[2]}})})},t.prototype.deregister=function(e,r,i){return(0,u.mG)(this,void 0,void 0,function(){var o;return(0,u.Jh)(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),r.unload?[4,Promise.resolve(r.unload(e,i))]:[3,2];case 1:a.sent(),a.label=2;case 2:return this.plugins=this.plugins.filter(function(s){return s.name!==r.name}),[3,4];case 3:return o=a.sent(),e.log("warn","Failed to unload destination",{plugin:r.name,error:o}),[3,4];case 4:return[2]}})})},t.prototype.dispatch=function(e){return(0,u.mG)(this,void 0,void 0,function(){var r;return(0,u.Jh)(this,function(i){return e.log("debug","Dispatching"),e.stats.increment("message_dispatched"),this.queue.push(e),r=this.subscribeToDelivery(e),this.scheduleFlush(0),[2,r]})})},t.prototype.subscribeToDelivery=function(e){return(0,u.mG)(this,void 0,void 0,function(){var r=this;return(0,u.Jh)(this,function(i){return[2,new Promise(function(o){var a=function(s,c){s.isSame(e)&&(r.off("flush",a),o(s))};r.on("flush",a)})]})})},t.prototype.dispatchSingle=function(e){return(0,u.mG)(this,void 0,void 0,function(){var r=this;return(0,u.Jh)(this,function(i){return e.log("debug","Dispatching"),e.stats.increment("message_dispatched"),this.queue.updateAttempts(e),e.attempts=1,[2,this.deliver(e).catch(function(o){var a=r.enqueuRetry(o,e);return a?r.subscribeToDelivery(e):(e.setFailedDelivery({reason:o}),e)})]})})},t.prototype.isEmpty=function(){return this.queue.length===0},t.prototype.scheduleFlush=function(e){var r=this;e===void 0&&(e=500),!this.flushing&&(this.flushing=!0,setTimeout(function(){r.flush().then(function(){setTimeout(function(){r.flushing=!1,r.queue.length&&r.scheduleFlush(0)},0)})},e))},t.prototype.deliver=function(e){return(0,u.mG)(this,void 0,void 0,function(){var r,i,o,a;return(0,u.Jh)(this,function(s){switch(s.label){case 0:return[4,this.criticalTasks.done()];case 1:s.sent(),r=Date.now(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.flushOne(e)];case 3:return e=s.sent(),i=Date.now()-r,this.emit("delivery_success",e),e.stats.gauge("delivered",i),e.log("debug","Delivered",e.event),[2,e];case 4:throw o=s.sent(),a=o,e.log("error","Failed to deliver",a),this.emit("delivery_failure",e,a),e.stats.increment("delivery_failed"),o;case 5:return[2]}})})},t.prototype.enqueuRetry=function(e,r){var i=!(e instanceof d.Y)||e.retry;return i?this.queue.pushWithBackoff(r):!1},t.prototype.flush=function(){return(0,u.mG)(this,void 0,void 0,function(){var e,r,i;return(0,u.Jh)(this,function(o){switch(o.label){case 0:if(this.queue.length===0)return[2,[]];if(e=this.queue.pop(),!e)return[2,[]];e.attempts=this.queue.getAttempts(e),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.deliver(e)];case 2:return e=o.sent(),this.emit("flush",e,!0),[3,4];case 3:return r=o.sent(),i=this.enqueuRetry(r,e),i||(e.setFailedDelivery({reason:r}),this.emit("flush",e,!1)),[2,[]];case 4:return[2,[e]]}})})},t.prototype.isReady=function(){return!0},t.prototype.availableExtensions=function(e){var r=this.plugins.filter(function(F){var T,N,K;if(F.type!=="destination"&&F.name!=="Segment.io")return!0;var z=void 0;return(T=F.alternativeNames)===null||T===void 0||T.forEach(function(J){e[J]!==void 0&&(z=e[J])}),(K=(N=e[F.name])!==null&&N!==void 0?N:z)!==null&&K!==void 0?K:(F.name==="Segment.io"?!0:e.All)!==!1}),i=Ar(r,"type"),o=i.before,a=o===void 0?[]:o,s=i.enrichment,c=s===void 0?[]:s,y=i.destination,w=y===void 0?[]:y,D=i.after,x=D===void 0?[]:D;return{before:a,enrichment:c,destinations:w,after:x}},t.prototype.flushOne=function(e){var r,i;return(0,u.mG)(this,void 0,void 0,function(){var o,a,s,c,y,w,T,D,x,F,T,N,K,z,J;return(0,u.Jh)(this,function(V){switch(V.label){case 0:if(!this.isReady())throw new Error("Not ready");e.attempts>1&&this.emit("delivery_retry",e),o=this.availableExtensions((r=e.event.integrations)!==null&&r!==void 0?r:{}),a=o.before,s=o.enrichment,c=0,y=a,V.label=1;case 1:return c<y.length?(w=y[c],[4,Tr(e,w)]):[3,4];case 2:T=V.sent(),T instanceof d._&&(e=T),this.emit("message_enriched",e,w),V.label=3;case 3:return c++,[3,1];case 4:D=0,x=s,V.label=5;case 5:return D<x.length?(F=x[D],[4,Dt(e,F)]):[3,8];case 6:T=V.sent(),T instanceof d._&&(e=T),this.emit("message_enriched",e,F),V.label=7;case 7:return D++,[3,5];case 8:return N=this.availableExtensions((i=e.event.integrations)!==null&&i!==void 0?i:{}),K=N.destinations,z=N.after,[4,new Promise(function(Y,rt){setTimeout(function(){var dt=K.map(function(me){return Dt(e,me)});Promise.all(dt).then(Y).catch(rt)},0)})];case 9:return V.sent(),e.stats.increment("message_delivered"),this.emit("message_delivered",e),J=z.map(function(Y){return Dt(e,Y)}),[4,Promise.all(J)];case 10:return V.sent(),[2,e]}})})},t}(At),xr=function(n){(0,u.ZT)(t,n);function t(e){return n.call(this,typeof e=="string"?new Rt(4,e):e)||this}return t.prototype.flush=function(){return(0,u.mG)(this,void 0,void 0,function(){return(0,u.Jh)(this,function(e){return l()?[2,[]]:[2,n.prototype.flush.call(this)]})})},t}(kr);function te(n){for(var t=n.constructor.prototype,e=0,r=Object.getOwnPropertyNames(t);e<r.length;e++){var i=r[e];if(i!=="constructor"){var o=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);o&&typeof o.value=="function"&&(n[i]=n[i].bind(n))}}return n}/*! js-cookie v3.0.1 | MIT */function Ut(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)n[r]=e[r]}return n}var Fr={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function ee(n,t){function e(i,o,a){if(typeof document!="undefined"){a=Ut({},t,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var c in a)a[c]&&(s+="; "+c,a[c]!==!0&&(s+="="+a[c].split(";")[0]));return document.cookie=i+"="+n.write(o,i)+s}}function r(i){if(!(typeof document=="undefined"||arguments.length&&!i)){for(var o=document.cookie?document.cookie.split("; "):[],a={},s=0;s<o.length;s++){var c=o[s].split("="),y=c.slice(1).join("=");try{var w=decodeURIComponent(c[0]);if(a[w]=n.read(y,w),i===w)break}catch(D){}}return i?a[i]:a}}return Object.create({set:e,get:r,remove:function(i,o){e(i,"",Ut({},o,{expires:-1}))},withAttributes:function(i){return ee(this.converter,Ut({},this.attributes,i))},withConverter:function(i){return ee(Ut({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(n)}})}var Gr=ee(Fr,{path:"/"});const _t=Gr;function Nr(n){var t=n.hostname,e=t.split("."),r=e[e.length-1],i=[];if(e.length===4&&parseInt(r,10)>0||e.length<=1)return i;for(var o=e.length-2;o>=0;--o)i.push(e.slice(o).join("."));return i}function Lr(n){try{return new URL(n)}catch(t){return}}function Ie(n){var t=Lr(n);if(t)for(var e=Nr(t),r=0;r<e.length;++r){var i="__tld__",o=e[r],a={domain:"."+o};try{if(_t.set(i,"1",a),_t.get(i))return _t.remove(i,a),o}catch(s){return}}}var Rr=365,Oe=function(){function n(t){t===void 0&&(t=n.defaults),this.options=(0,u.pi)((0,u.pi)({},n.defaults),t)}return Object.defineProperty(n,"defaults",{get:function(){return{maxage:Rr,domain:Ie(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),n.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},n.prototype.get=function(t){var e;try{var r=_t.get(t);if(r==null)return null;try{return(e=JSON.parse(r))!==null&&e!==void 0?e:null}catch(i){return r!=null?r:null}}catch(i){return null}},n.prototype.set=function(t,e){typeof e=="string"?_t.set(t,e,this.opts()):e===null?_t.remove(t,this.opts()):_t.set(t,JSON.stringify(e),this.opts())},n.prototype.remove=function(t){return _t.remove(t,this.opts())},n}(),Ur=function(){function n(){}return n.prototype.localStorageWarning=function(t,e){console.warn("Unable to access ".concat(t,", localStorage may be ").concat(e))},n.prototype.get=function(t){var e;try{var r=localStorage.getItem(t);if(r===null)return null;try{return(e=JSON.parse(r))!==null&&e!==void 0?e:null}catch(i){return r!=null?r:null}}catch(i){return this.localStorageWarning(t,"unavailable"),null}},n.prototype.set=function(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(r){this.localStorageWarning(t,"full")}},n.prototype.remove=function(t){try{return localStorage.removeItem(t)}catch(e){this.localStorageWarning(t,"unavailable")}},n}(),re=function(){function n(){this.cache={}}return n.prototype.get=function(t){var e;return(e=this.cache[t])!==null&&e!==void 0?e:null},n.prototype.set=function(t,e){this.cache[t]=e},n.prototype.remove=function(t){delete this.cache[t]},n}(),st={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"};function Ee(n){return n&&n.stores&&Array.isArray(n.stores)&&n.stores.every(function(t){return Object.values(st).includes(t)})}function Jr(n){return typeof n=="object"&&n.name!==void 0}function ne(n){var t=n.map(function(e){var r,i;switch(Jr(e)?(r=e.name,i=e.settings):r=e,r){case st.Cookie:return new Oe(i);case st.LocalStorage:return new Ur;case st.Memory:return new re;default:throw new Error("Unknown Store Type: ".concat(e))}});return t}function Ae(n,t){return n.map(function(e){return t&&e===st.Cookie?{name:e,settings:t}:e})}var ie=function(n,t,e,r){console.warn("".concat(n.constructor.name,": Can't ").concat(t,' key "').concat(e,'" | Err: ').concat(r))},Pt=function(){function n(t){this.stores=t}return n.prototype.get=function(t){for(var e=null,r=0,i=this.stores;r<i.length;r++){var o=i[r];try{if(e=o.get(t),e!=null)return e}catch(a){ie(o,"get",t,a)}}return null},n.prototype.set=function(t,e){this.stores.forEach(function(r){try{r.set(t,e)}catch(i){ie(r,"set",t,i)}})},n.prototype.clear=function(t){this.stores.forEach(function(e){try{e.remove(t)}catch(r){ie(e,"remove",t,r)}})},n.prototype.getAndSync=function(t){var e=this.get(t),r=typeof e=="number"?e.toString():e;return this.set(t,r),r},n}(),It={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},De=function(){function n(t,e){t===void 0&&(t=It);var r=this,i,o,a,s,c;this.options={},this.id=function(w){if(r.options.disable)return null;var D=r.identityStore.getAndSync(r.idKey);if(w!==void 0){r.identityStore.set(r.idKey,w);var x=w!==D&&D!==null&&w!==null;x&&r.anonymousId(null)}var F=r.identityStore.getAndSync(r.idKey);if(F)return F;var T=r.legacyUserStore.get(It.cookie.oldKey);return T?typeof T=="object"?T.id:T:null},this.anonymousId=function(w){var D,x;if(r.options.disable)return null;if(w===void 0){var F=(D=r.identityStore.getAndSync(r.anonKey))!==null&&D!==void 0?D:(x=r.legacySIO())===null||x===void 0?void 0:x[0];if(F)return F}return w===null?(r.identityStore.set(r.anonKey,null),r.identityStore.getAndSync(r.anonKey)):(r.identityStore.set(r.anonKey,w!=null?w:(0,Zt.v4)()),r.identityStore.getAndSync(r.anonKey))},this.traits=function(w){var D;if(!r.options.disable)return w===null&&(w={}),w&&r.traitsStore.set(r.traitsKey,w!=null?w:{}),(D=r.traitsStore.get(r.traitsKey))!==null&&D!==void 0?D:{}},this.options=(0,u.pi)((0,u.pi)({},It),t),this.cookieOptions=e,this.idKey=(o=(i=t.cookie)===null||i===void 0?void 0:i.key)!==null&&o!==void 0?o:It.cookie.key,this.traitsKey=(s=(a=t.localStorage)===null||a===void 0?void 0:a.key)!==null&&s!==void 0?s:It.localStorage.key,this.anonKey=(c=e==null?void 0:e.ajsKeyOverwrite)!==null&&c!==void 0?c:"ajs_anonymous_id",this.identityStore=this.createStorage(this.options,e),this.legacyUserStore=this.createStorage(this.options,e,function(w){return w===st.Cookie}),this.traitsStore=this.createStorage(this.options,e,function(w){return w!==st.Cookie});var y=this.legacyUserStore.get(It.cookie.oldKey);y&&typeof y=="object"&&(y.id&&this.id(y.id),y.traits&&this.traits(y.traits)),te(this)}return n.prototype.legacySIO=function(){var t=this.legacyUserStore.get("_sio");if(!t)return null;var e=t.split("----"),r=e[0],i=e[1];return[r,i]},n.prototype.identify=function(t,e){if(!this.options.disable){e=e!=null?e:{};var r=this.id();(r===null||r===t)&&(e=(0,u.pi)((0,u.pi)({},this.traits()),e)),t&&this.id(t),this.traits(e)}},n.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},n.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},n.prototype.load=function(){return new n(this.options,this.cookieOptions)},n.prototype.save=function(){return!0},n.prototype.createStorage=function(t,e,r){var i=[st.LocalStorage,st.Cookie,st.Memory];return t.disable?new Pt([]):t.persist?(t.storage!==void 0&&t.storage!==null&&Ee(t.storage)&&(i=t.storage.stores),t.localStorageFallbackDisabled&&(i=i.filter(function(o){return o!==st.LocalStorage})),r&&(i=i.filter(r)),new Pt(ne(Ae(i,e)))):new Pt([new re])},n.defaults=It,n}(),je={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},Vr=function(n){(0,u.ZT)(t,n);function t(e,r){e===void 0&&(e=je);var i=n.call(this,(0,u.pi)((0,u.pi)({},je),e),r)||this;return i.anonymousId=function(o){},te(i),i}return t}(De),Mt="analytics";function Me(){var n=Mt.split("."),t=window;return n.length>1?(n.forEach(function(e){t=t[e]}),t):window[Mt]}function Br(n){Mt=n}function Kr(n){var t=Mt.split("."),e=window,r=t.length-1;t.length>1?t.forEach(function(i,o){o===r?e[i]=n:(e[i]||(e[i]={}),e=e[i])}):window[Mt]=n}var zr=function(n){return typeof n=="object"&&n!==null&&"then"in n&&typeof n.then=="function"},Te=function(n,t,e){e.getAndRemove(n).forEach(function(r){Jt(t,r).catch(console.error)})},Hr=function(n,t){return(0,u.mG)(void 0,void 0,void 0,function(){var e,r,i;return(0,u.Jh)(this,function(o){switch(o.label){case 0:e=0,r=t.getAndRemove("addSourceMiddleware"),o.label=1;case 1:return e<r.length?(i=r[e],[4,Jt(n,i).catch(console.error)]):[3,4];case 2:o.sent(),o.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},Ti=function(n,t){return __awaiter(void 0,void 0,void 0,function(){var e,r,i;return __generator(this,function(o){switch(o.label){case 0:e=0,r=t.getAndRemove("register"),o.label=1;case 1:return e<r.length?(i=r[e],[4,Jt(n,i).catch(console.error)]):[3,4];case 2:o.sent(),o.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},Wr=Te.bind(void 0,"on"),qr=Te.bind(void 0,"setAnonymousId"),Qr=function(n,t){Object.keys(t.calls).forEach(function(e){t.getAndRemove(e).forEach(function(r){setTimeout(function(){Jt(n,r).catch(console.error)},0)})})},jt=function(n){if(ke(n)){var t=n.pop();return U(t)}},ke=function(n){var t=n[n.length-1];return I(t)},oe=function(){function n(t,e,r,i){r===void 0&&(r=function(){}),i===void 0&&(i=console.error),this.method=t,this.resolve=r,this.reject=i,this.called=!1,this.args=e}return n}(),Zr=function(){function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._callMap={},this.add.apply(this,t)}return Object.defineProperty(n.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(t){this._callMap=t},enumerable:!1,configurable:!0}),n.prototype.get=function(t){var e;return(e=this.calls[t])!==null&&e!==void 0?e:[]},n.prototype.getAndRemove=function(t){var e=this.get(t);return this.calls[t]=[],e},n.prototype.add=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];e.forEach(function(i){var o=["track","screen","alias","group","page","identify"];o.includes(i.method)&&!ke(i.args)&&(i.args=(0,u.ev)((0,u.ev)([],i.args,!0),[W()],!1)),t.calls[i.method]?t.calls[i.method].push(i):t.calls[i.method]=[i]})},n.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},n.prototype.toArray=function(){var t;return(t=[]).concat.apply(t,Object.values(this.calls))},n.prototype._pushSnippetWindowBuffer=function(){if(X()!=="npm"){var t=Me();if(Array.isArray(t)){var e=t.splice(0,t.length),r=e.map(function(i){var o=i[0],a=i.slice(1);return new oe(o,a)});this.add.apply(this,r)}}},n}();function Jt(n,t){return(0,u.mG)(this,void 0,void 0,function(){var e,r;return(0,u.Jh)(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t.called?[2,void 0]:(t.called=!0,e=n[t.method].apply(n,t.args),zr(e)?[4,e]:[3,2]);case 1:i.sent(),i.label=2;case 2:return t.resolve(e),[3,4];case 3:return r=i.sent(),t.reject(r),[3,4];case 4:return[2]}})})}var Yr=function(){function n(t){var e=this;this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=L,this._preInitBuffer=new Zr,this._promise=t(this._preInitBuffer),this._promise.then(function(r){var i=r[0],o=r[1];e.instance=i,e.ctx=o}).catch(function(){})}return n.prototype.then=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(t=this._promise).then.apply(t,e)},n.prototype.catch=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(t=this._promise).catch.apply(t,e)},n.prototype.finally=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(t=this._promise).finally.apply(t,e)},n.prototype._createMethod=function(t){var e=this;return function(){for(var r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(e.instance){var a=(r=e.instance)[t].apply(r,i);return Promise.resolve(a)}return new Promise(function(s,c){e._preInitBuffer.add(new oe(t,i,s,c))})}},n.prototype._createChainableMethod=function(t){var e=this;return function(){for(var r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return e.instance?((r=e.instance)[t].apply(r,i),e):(e._preInitBuffer.add(new oe(t,i)),e)}},n}();function $r(n,t){var e,r,i,o,a=n.user();return t.previousId=(i=(r=(e=t.previousId)!==null&&e!==void 0?e:t.from)!==null&&r!==void 0?r:a.id())!==null&&i!==void 0?i:a.anonymousId(),t.userId=(o=t.userId)!==null&&o!==void 0?o:t.to,delete t.from,delete t.to,t}var Xr=function(n){return n.name==="Segment.io"};function ki(n,t,e){var r,i,o;window.addEventListener("pagehide",function(){s.push.apply(s,Array.from(c)),c.clear()});var a=(r=t==null?void 0:t.apiKey)!==null&&r!==void 0?r:"",s=n.options.disableClientPersistence?new PriorityQueue(n.queue.queue.maxAttempts,[]):new PersistedPriorityQueue(n.queue.queue.maxAttempts,"".concat(a,":dest-Segment.io")),c=new Set,y=!1,w=(i=t==null?void 0:t.apiHost)!==null&&i!==void 0?i:METAROUTER_API_HOST,D=(o=t==null?void 0:t.protocol)!==null&&o!==void 0?o:"https",x="".concat(D,"://").concat(w),F=t==null?void 0:t.deliveryStrategy,T=(F==null?void 0:F.strategy)==="batching"?batch(w,F.config):standard(F==null?void 0:F.config);function N(z){return __awaiter(this,void 0,void 0,function(){var J,V;return __generator(this,function(Y){return isOffline()?(s.push(z),scheduleFlush(y,s,K,scheduleFlush),[2,z]):(c.add(z),J=z.event.type.charAt(0),V=toFacade(z.event).json(),z.event.type==="track"&&delete V.traits,z.event.type==="alias"&&(V=$r(n,V)),[2,T.dispatch("".concat(x,"/").concat(J),normalize(n,V,t,e,z)).then(function(){return z}).catch(function(rt){if(z.log("error","Error sending event",rt),rt.name==="RateLimitError"){var dt=rt.retryTimeout;s.pushWithBackoff(z,dt)}else s.pushWithBackoff(z);return scheduleFlush(y,s,K,scheduleFlush),z}).finally(function(){c.delete(z)})])})})}var K={metadata:{writeKey:a,apiHost:w,protocol:D},name:"Segment.io",type:"destination",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:N,identify:N,page:N,alias:N,group:N,screen:N};return s.todo&&scheduleFlush(y,s,K,scheduleFlush),K}var wt="This is being deprecated and will be not be available in future releases of Analytics JS",ae=_(),se=ae==null?void 0:ae.analytics;function tn(n,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var r=t?10:1,i=e?new $t(r,[]):new Rt(r,n);return new xr(i)}var en=function(){function n(t,e){var r;this.timeout=300,this._getSegmentPluginMetadata=function(){var i;return(i=e.plugins.find(Xr))===null||i===void 0?void 0:i.metadata},this.writeKey=t.writeKey,this.cdnSettings=(r=t.cdnSettings)!==null&&r!==void 0?r:{integrations:{},edgeFunction:{}},this.cdnURL=t.cdnURL}return Object.defineProperty(n.prototype,"apiHost",{get:function(){var t,e;return(e=(t=this._getSegmentPluginMetadata)===null||t===void 0?void 0:t.call(this))===null||e===void 0?void 0:e.apiHost},enumerable:!1,configurable:!0}),n}();function mt(){console.warn(wt)}var xe=function(n){(0,u.ZT)(t,n);function t(e,r,i,o,a){var s=this,c,y;s=n.call(this)||this,s._debug=!1,s.initialized=!1,s.user=function(){return s._user},s.init=s.initialize.bind(s),s.log=mt,s.addIntegrationMiddleware=mt,s.listeners=mt,s.addEventListener=mt,s.removeAllListeners=mt,s.removeListener=mt,s.removeEventListener=mt,s.hasListeners=mt,s.add=mt,s.addIntegration=mt;var w=r==null?void 0:r.cookie,D=(c=r==null?void 0:r.disableClientPersistence)!==null&&c!==void 0?c:!1;s.queue=i!=null?i:tn("".concat(e.writeKey,":event-queue"),r==null?void 0:r.retryQueue,D),s.settings=new en(e,s.queue);var x=r==null?void 0:r.storage;return s._universalStorage=s.createStore(D,x,w),s._user=o!=null?o:new De((0,u.pi)({persist:!D,storage:r==null?void 0:r.storage},r==null?void 0:r.user),w).load(),s._group=a!=null?a:new Vr((0,u.pi)({persist:!D,storage:r==null?void 0:r.storage},r==null?void 0:r.group),w).load(),s.eventFactory=new Sr(s._user),s.integrations=(y=r==null?void 0:r.integrations)!==null&&y!==void 0?y:{},s.options=r!=null?r:{},te(s),s}return t.prototype.createStore=function(e,r,i){return e?new Pt([new re]):r&&Ee(r)?new Pt(ne(Ae(r.stores,i))):new Pt(ne([st.LocalStorage,{name:st.Cookie,settings:i},st.Memory]))},Object.defineProperty(t.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),t.prototype.track=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(0,u.mG)(this,void 0,void 0,function(){var i,o,a,s,c,y,w,D=this;return(0,u.Jh)(this,function(x){return i=jt(e),o=S.apply(void 0,e),a=o[0],s=o[1],c=o[2],y=o[3],w=this.eventFactory.track(a,s,c,this.integrations,i),[2,this._dispatch(w,y).then(function(F){return D.emit("track",a,F.event.properties,F.event.options),F})]})})},t.prototype.page=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(0,u.mG)(this,void 0,void 0,function(){var i,o,a,s,c,y,w,D,x=this;return(0,u.Jh)(this,function(F){return i=jt(e),o=A.apply(void 0,e),a=o[0],s=o[1],c=o[2],y=o[3],w=o[4],D=this.eventFactory.page(a,s,c,y,this.integrations,i),[2,this._dispatch(D,w).then(function(T){return x.emit("page",a,s,T.event.properties,T.event.options),T})]})})},t.prototype.identify=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(0,u.mG)(this,void 0,void 0,function(){var i,o,a,s,c,y,w,D=this;return(0,u.Jh)(this,function(x){return i=jt(e),o=b(this._user).apply(void 0,e),a=o[0],s=o[1],c=o[2],y=o[3],this._user.identify(a,s),w=this.eventFactory.identify(this._user.id(),this._user.traits(),c,this.integrations,i),[2,this._dispatch(w,y).then(function(F){return D.emit("identify",F.event.userId,F.event.traits,F.event.options),F})]})})},t.prototype.group=function(){for(var e=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=jt(r);if(r.length===0)return this._group;var a=b(this._group).apply(void 0,r),s=a[0],c=a[1],y=a[2],w=a[3];this._group.identify(s,c);var D=this._group.id(),x=this._group.traits(),F=this.eventFactory.group(D,x,y,this.integrations,o);return this._dispatch(F,w).then(function(T){return e.emit("group",T.event.groupId,T.event.traits,T.event.options),T})},t.prototype.alias=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(0,u.mG)(this,void 0,void 0,function(){var i,o,a,s,c,y,w,D=this;return(0,u.Jh)(this,function(x){return i=jt(e),o=E.apply(void 0,e),a=o[0],s=o[1],c=o[2],y=o[3],w=this.eventFactory.alias(a,s,c,this.integrations,i),[2,this._dispatch(w,y).then(function(F){return D.emit("alias",a,s,F.event.options),F})]})})},t.prototype.screen=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(0,u.mG)(this,void 0,void 0,function(){var i,o,a,s,c,y,w,D,x=this;return(0,u.Jh)(this,function(F){return i=jt(e),o=A.apply(void 0,e),a=o[0],s=o[1],c=o[2],y=o[3],w=o[4],D=this.eventFactory.screen(a,s,c,y,this.integrations,i),[2,this._dispatch(D,w).then(function(T){return x.emit("screen",a,s,T.event.properties,T.event.options),T})]})})},t.prototype.trackClick=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(0,u.mG)(this,void 0,void 0,function(){var i,o;return(0,u.Jh)(this,function(a){switch(a.label){case 0:return[4,Promise.resolve().then(H.bind(H,638))];case 1:return i=a.sent(),[2,(o=i.link).call.apply(o,(0,u.ev)([this],e,!1))]}})})},t.prototype.trackLink=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(0,u.mG)(this,void 0,void 0,function(){var i,o;return(0,u.Jh)(this,function(a){switch(a.label){case 0:return[4,Promise.resolve().then(H.bind(H,638))];case 1:return i=a.sent(),[2,(o=i.link).call.apply(o,(0,u.ev)([this],e,!1))]}})})},t.prototype.trackSubmit=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(0,u.mG)(this,void 0,void 0,function(){var i,o;return(0,u.Jh)(this,function(a){switch(a.label){case 0:return[4,Promise.resolve().then(H.bind(H,638))];case 1:return i=a.sent(),[2,(o=i.form).call.apply(o,(0,u.ev)([this],e,!1))]}})})},t.prototype.trackForm=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(0,u.mG)(this,void 0,void 0,function(){var i,o;return(0,u.Jh)(this,function(a){switch(a.label){case 0:return[4,Promise.resolve().then(H.bind(H,638))];case 1:return i=a.sent(),[2,(o=i.form).call.apply(o,(0,u.ev)([this],e,!1))]}})})},t.prototype.register=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(0,u.mG)(this,void 0,void 0,function(){var i,o,a=this;return(0,u.Jh)(this,function(s){switch(s.label){case 0:return i=vt.system(),o=e.map(function(c){return a.queue.register(i,c,a)}),[4,Promise.all(o)];case 1:return s.sent(),[2,i]}})})},t.prototype.deregister=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(0,u.mG)(this,void 0,void 0,function(){var i,o,a=this;return(0,u.Jh)(this,function(s){switch(s.label){case 0:return i=vt.system(),o=e.map(function(c){var y=a.queue.plugins.find(function(w){return w.name===c});if(y)return a.queue.deregister(i,y,a);i.log("warn","plugin ".concat(c," not found"))}),[4,Promise.all(o)];case 1:return s.sent(),[2,i]}})})},t.prototype.debug=function(e){return e===!1&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=e,this},t.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},t.prototype.timeout=function(e){this.settings.timeout=e},t.prototype._dispatch=function(e,r){return(0,u.mG)(this,void 0,void 0,function(){var i;return(0,u.Jh)(this,function(o){return i=new vt(e),l()&&!this.options.retryQueue?[2,i]:[2,Lt(i,this.queue,this,{callback:r,debug:this._debug,timeout:this.settings.timeout})]})})},t.prototype.addSourceMiddleware=function(e){return(0,u.mG)(this,void 0,void 0,function(){var r=this;return(0,u.Jh)(this,function(i){switch(i.label){case 0:return[4,this.queue.criticalTasks.run(function(){return(0,u.mG)(r,void 0,void 0,function(){var o,a,s;return(0,u.Jh)(this,function(c){switch(c.label){case 0:return[4,Promise.resolve().then(H.bind(H,235))];case 1:return o=c.sent().sourceMiddlewarePlugin,a={},this.queue.plugins.forEach(function(y){if(y.type==="destination")return a[y.name]=!0}),s=o(e,a),[4,this.register(s)];case 2:return c.sent(),[2]}})})})];case 1:return i.sent(),[2,this]}})})},t.prototype.addDestinationMiddleware=function(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return this.queue.plugins.filter(Cr).forEach(function(o){(e==="*"||o.name.toLowerCase()===e.toLowerCase())&&o.addMiddleware.apply(o,r)}),Promise.resolve(this)},t.prototype.setAnonymousId=function(e){return this._user.anonymousId(e)},t.prototype.queryString=function(e){return(0,u.mG)(this,void 0,void 0,function(){var r;return(0,u.Jh)(this,function(i){switch(i.label){case 0:return this.options.useQueryString===!1?[2,[]]:[4,Promise.resolve().then(H.bind(H,610))];case 1:return r=i.sent().queryString,[2,r(this,e)]}})})},t.prototype.use=function(e){return e(this),this},t.prototype.ready=function(e){return e===void 0&&(e=function(r){return r}),(0,u.mG)(this,void 0,void 0,function(){return(0,u.Jh)(this,function(r){return[2,Promise.all(this.queue.plugins.map(function(i){return i.ready?i.ready():Promise.resolve()})).then(function(i){return e(i),i})]})})},t.prototype.noConflict=function(){return console.warn(wt),Kr(se!=null?se:this),this},t.prototype.normalize=function(e){return console.warn(wt),this.eventFactory.normalize(e)},Object.defineProperty(t.prototype,"failedInitializations",{get:function(){return console.warn(wt),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"VERSION",{get:function(){return L},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e,r){return(0,u.mG)(this,void 0,void 0,function(){return(0,u.Jh)(this,function(i){return console.warn(wt),[2,Promise.resolve(this)]})})},t.prototype.pageview=function(e){return(0,u.mG)(this,void 0,void 0,function(){return(0,u.Jh)(this,function(r){switch(r.label){case 0:return console.warn(wt),[4,this.page({path:e})];case 1:return r.sent(),[2,this]}})})},Object.defineProperty(t.prototype,"plugins",{get:function(){var e;return console.warn(wt),(e=this._plugins)!==null&&e!==void 0?e:{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Integrations",{get:function(){console.warn(wt);var e=this.queue.plugins.filter(function(r){return r.type==="destination"}).reduce(function(r,i){var o="".concat(i.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),a=window[o];if(!a)return r;var s=a.Integration;return s?(r[i.name]=s,r):(r[i.name]=a,r)},{});return e},enumerable:!1,configurable:!0}),t.prototype.push=function(e){var r=this,i=e.shift();i&&!r[i]||r[i].apply(this,e)},t}(At),xi=function(n){(0,u.ZT)(t,n);function t(){var e=n.call(this,{writeKey:""},{disableClientPersistence:!0})||this;return e.initialized=!0,e}return t}(xe),rn=function(n){var t=!1;window.addEventListener("pagehide",function(){t||(t=!0,n(t))}),document.addEventListener("visibilitychange",function(){if(document.visibilityState=="hidden"){if(t)return;t=!0}else t=!1;n(t)})},Fe=function(n){(0,u.ZT)(t,n);function t(e,r){var i=n.call(this,e)||this;return i.retryTimeout=r,i.name="RateLimitError",i}return t}(Error),nn=500,on=64;function ue(n){var t=encodeURI(JSON.stringify(n)).split(/%..|./).length-1;return t/1024}function an(n){return ue(n)>=nn-50}function sn(n){return ue(n)>=on-10}function un(n){var t=[],e=0;return n.forEach(function(r){var i=ue(t[e]);i>=64&&e++,t[e]?t[e].push(r):t[e]=[r]}),t}function cn(n,t){var e,r,i=[],o=!1,a=(e=t==null?void 0:t.size)!==null&&e!==void 0?e:10,s=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:5e3,c=0;function y(T){var N;if(T.length!==0){var K=(N=T[0])===null||N===void 0?void 0:N.writeKey,z=T.map(function(J){var V=J,Y=V.sentAt,rt=(0,u._T)(V,["sentAt"]);return rt});return j("https://".concat(n,"/b"),{keepalive:(t==null?void 0:t.keepalive)||o,headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify({writeKey:K,batch:z,sentAt:new Date().toISOString()})}).then(function(J){var V;if(J.status>=500)throw new Error("Bad response from server: ".concat(J.status));if(J.status===429){var Y=(V=J.headers)===null||V===void 0?void 0:V.get("x-ratelimit-reset"),rt=typeof Y=="string"?parseInt(Y)*1e3:s;throw new Fe("Rate limit exceeded: ".concat(J.status),rt)}})}}function w(T){var N;return T===void 0&&(T=1),(0,u.mG)(this,void 0,void 0,function(){var K;return(0,u.Jh)(this,function(z){return i.length?(K=i,i=[],[2,(N=y(K))===null||N===void 0?void 0:N.catch(function(J){var V,Y=vt.system();Y.log("error","Error sending batch",J),T<=((V=t==null?void 0:t.maxRetries)!==null&&V!==void 0?V:10)&&(J.name==="RateLimitError"&&(c=J.retryTimeout),i.push.apply(i,K),i.map(function(rt){if("_metadata"in rt){var dt=rt;dt._metadata=(0,u.pi)((0,u.pi)({},dt._metadata),{retryCount:T})}}),x(T+1))})]):[2]})})}var D;function x(T){T===void 0&&(T=1),!D&&(D=setTimeout(function(){D=void 0,w(T).catch(console.error)},c||s),c=0)}rn(function(T){if(o=T,o&&i.length){var N=un(i).map(y);Promise.all(N).catch(console.error)}});function F(T,N){return(0,u.mG)(this,void 0,void 0,function(){var K;return(0,u.Jh)(this,function(z){return i.push(N),K=i.length>=a||an(i)||(t==null?void 0:t.keepalive)&&sn(i),[2,K||o?w():x()]})})}return{dispatch:F}}function ln(n){function t(e,r){var i={"Content-Type":"text/plain"};return(n==null?void 0:n.trace)===!0&&(i.Trace="true"),j(e,{keepalive:n==null?void 0:n.keepalive,headers:i,method:"post",body:JSON.stringify(r)}).then(function(o){var a;if(o.status>=500)throw new Error("Bad response from server: ".concat(o.status));if(o.status===429){var s=(a=o.headers)===null||a===void 0?void 0:a.get("x-ratelimit-reset"),c=s?parseInt(s)*1e3:5e3;throw new Fe("Rate limit exceeded: ".concat(o.status),c)}})}return{dispatch:t}}var Ge=function(n,t){return(0,u.mG)(void 0,void 0,void 0,function(){var e;return(0,u.Jh)(this,function(r){return e=function(i){return(0,u.mG)(void 0,void 0,void 0,function(){var o;return(0,u.Jh)(this,function(a){switch(a.label){case 0:return n(i)?(o=e,[4,t()]):[3,2];case 1:return[2,o.apply(void 0,[a.sent()])];case 2:return[2]}})})},[2,e(void 0)]})})};function fn(n,t){return(0,u.mG)(this,void 0,void 0,function(){var e,r=this;return(0,u.Jh)(this,function(i){switch(i.label){case 0:return e=[],l()?[2,t]:[4,Ge(function(){return t.length>0&&!l()},function(){return(0,u.mG)(r,void 0,void 0,function(){var o,a,s;return(0,u.Jh)(this,function(c){switch(c.label){case 0:return o=t.pop(),o?[4,Dt(o,n)]:[2];case 1:return a=c.sent(),s=a instanceof vt,s||e.push(o),[2]}})})})];case 1:return i.sent(),e.map(function(o){return t.pushWithBackoff(o)}),[2,t]}})})}function Vt(n,t,e,r){var i=this;n||setTimeout(function(){return(0,u.mG)(i,void 0,void 0,function(){var o,a;return(0,u.Jh)(this,function(s){switch(s.label){case 0:return o=!0,[4,fn(e,t)];case 1:return a=s.sent(),o=!1,t.todo>0&&r(o,a,e,r),[2]}})})},Math.random()*5e3)}function dn(n,t,e,r,i){var o,a=n.user();delete t.options,t.writeKey=e==null?void 0:e.apiKey,t.userId=t.userId||a.id(),t.anonymousId=t.anonymousId||a.anonymousId(),t.sentAt=new Date;var s=n.queue.failedInitializations||[];s.length>0&&(t._metadata={failedInitializations:s}),i!=null&&(i.attempts>1&&(t._metadata=(0,u.pi)((0,u.pi)({},t._metadata),{retryCount:i.attempts})),i.attempts++);var c=[],y=[];for(var w in r){var D=r[w];w==="Segment.io"&&c.push(w),D.bundlingStatus==="bundled"&&c.push(w),D.bundlingStatus==="unbundled"&&y.push(w)}for(var x=0,F=(e==null?void 0:e.unbundledIntegrations)||[];x<F.length;x++){var T=F[x];y.includes(T)||y.push(T)}var N=(o=e==null?void 0:e.maybeBundledConfigIds)!==null&&o!==void 0?o:{},K=[];return c.sort().forEach(function(z){var J;((J=N[z])!==null&&J!==void 0?J:[]).forEach(function(V){K.push(V)})}),(e==null?void 0:e.addBundledMetadata)!==!1&&(t._metadata=(0,u.pi)((0,u.pi)({},t._metadata),{bundled:c.sort(),unbundled:y.sort(),bundledIds:K})),t}var Ne=H(497),hn=H(844);function vn(n,t,e=30){const r=new Date,i=t;r.setTime(r.getTime()+e*24*60*60*1e3),document.cookie=n+"="+i+"; expires="+r.toUTCString()+"; path=/; Secure;"}function ce(n){const t=new RegExp("(?:^|; )"+encodeURIComponent(n)+"=([^;]*)").exec(document.cookie);return t?t[1]:void 0}function pn(n){document.cookie=n+"= ; expires = Thu, 01 Jan 1970 00:00:00 GMT; path=/;"}function Fi(){const n=document.cookie.split(";");for(let t=0;t<n.length;t++){const e=n[t],r=e.indexOf("="),i=r>-1?e.substr(0,r):e;document.cookie=i+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}}var Bt=(n=>(n.None="None",n.StrictlyNecessary="C0001",n.Performance="C0002",n.Functionality="C0003",n.TargetingSale="C0004",n.TargetingServiceProvider="C0005",n))(Bt||{}),yn=(n=>(n.Unknown="Unknown",n.OneTrust="OneTrust",n))(yn||{});class gn{constructor(t,e,r,i=!0,o){if(this.consentProvider=t,this.cookieName=e,this.impliedConsent=r,this.defaultGroupsValue=i,this.globalPrivacyControl=o,this.isCategoryOptOut=new Map,this.setDefaultValues(),this.cookieValue=ce(this.cookieName),this.cookieValue!==void 0)switch(this.consentProvider){case"OneTrust":this.setCategoriesFromCookie(this.cookieValue);break}this.setGlobalPrivacyControl()}hasConsentByCategory(t){if(this.cookieValue===void 0&&!this.globalPrivacyControl.enabled)return this.impliedConsent;let e=this.impliedConsent;switch(this.consentProvider){case"OneTrust":return e=this.isCategoryOptOut.get(t),e===void 0?this.impliedConsent:!e}return e}getConsentCategoryFromString(t){const e=Object.keys(Bt).filter(r=>Bt[r]===t);return e.length>0?Bt[e[0]]:void 0}setCategoriesFromCookie(t){try{const e=decodeURI(t),i=new URLSearchParams(e).get("groups");if(i===null)return;const o=i.split(",");for(const a of o){const s=a.split(":");if(s.length>1){const c=s[0],y=s[1],w=this.getConsentCategoryFromString(c);if(w!==void 0)if(this.defaultGroupsValue===!1)this.isCategoryOptOut.set(w,y==="1");else{const x=!(y==="1");this.isCategoryOptOut.set(w,x)}}}}catch(e){return}}getConsentRequestInfo(){return{consent:{optOut:{C0001:this.isCategoryOptOut.get("C0001")===void 0?!this.impliedConsent:this.isCategoryOptOut.get("C0001"),C0002:this.isCategoryOptOut.get("C0002")===void 0?!this.impliedConsent:this.isCategoryOptOut.get("C0002"),C0003:this.isCategoryOptOut.get("C0003")===void 0?!this.impliedConsent:this.isCategoryOptOut.get("C0003"),C0004:this.isCategoryOptOut.get("C0004")===void 0?!this.impliedConsent:this.isCategoryOptOut.get("C0004"),C0005:this.isCategoryOptOut.get("C0005")===void 0?!this.impliedConsent:this.isCategoryOptOut.get("C0005")}}}}setDefaultValues(){this.isCategoryOptOut.set("C0001",!this.impliedConsent),this.isCategoryOptOut.set("C0003",!this.impliedConsent),this.isCategoryOptOut.set("C0002",!this.impliedConsent),this.isCategoryOptOut.set("C0004",!this.impliedConsent),this.isCategoryOptOut.set("C0005",!this.impliedConsent)}setGlobalPrivacyControl(){this.globalPrivacyControl.enabled&&this.getGlobalPrivacyControlValue()&&this.globalPrivacyControl.categories.forEach(t=>{this.isCategoryOptOut.set(t,!0)})}getGlobalPrivacyControlValue(){return navigator!==void 0&&navigator.globalPrivacyControl!==void 0?navigator.globalPrivacyControl===!0:!1}}function Kt(n){return new Promise((t,e)=>{setTimeout(()=>{n(t,e)},0)})}var le=(n=>(n.URLEncodedKeyValue="URLEncodedKeyValue",n))(le||{});const mn=n=>{try{const t=decodeURI(n);return new URLSearchParams(t)}catch(t){return null}},_n=n=>n.toLowerCase()==="true",Le=n=>_n(n)||n==="1",bn=(n,t,e)=>{const r=n.split(":");if(r.length>1){const i=r[0],o=r[1];e[i]=t?!Le(o):Le(o)}},wn=n=>{const t=n.get("groups");return t?t.split(","):null},Sn=(n,t)=>{const e={},r=mn(n);if(!r)return e;const i=wn(r);if(!i)return e;for(const o of i)bn(o,t,e);return e},Cn=(n,t)=>{const e={};return n.map(r=>{e[r]=t}),e};function Pn(){return(navigator==null?void 0:navigator.globalPrivacyControl)||!1}const In=n=>{const t={};return n.enabled&&Pn()&&n.codes.forEach(e=>{t[e]=!0}),t};var On=Object.defineProperty,Re=Object.getOwnPropertySymbols,En=Object.prototype.hasOwnProperty,An=Object.prototype.propertyIsEnumerable,Ue=(n,t,e)=>t in n?On(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,fe=(n,t)=>{for(var e in t||(t={}))En.call(t,e)&&Ue(n,e,t[e]);if(Re)for(var e of Re(t))An.call(t,e)&&Ue(n,e,t[e]);return n};class Dn{constructor(t){this.settings=t,this._optOutCodesValues={},this._optOutCodesValues=this.initializeConsentCodesValues()}get optOutCodesValues(){return this._optOutCodesValues}initializeConsentCodesValues(){return this.mergeConsent(this.buildConsentSteps())}buildConsentSteps(){return{explicit:this.buildExplicitCodeValues(),cookieValues:this.parseCodesFromCookieValue(ce(this.settings.cookieName)),globalPrivacyControl:this.buildGPCCodeValues()}}mergeConsent(t){const e=fe(fe(fe({},t.explicit),t.cookieValues),t.globalPrivacyControl);return this.lowercaseKeys(e)}lowercaseKeys(t){return Object.keys(t).reduce((e,r)=>(e[r.toLowerCase()]=t[r],e),{})}buildExplicitCodeValues(){return Cn(this.settings.codes,this.settings.explicitConsent)}parseCodesFromCookieValue(t){switch(this.settings.cookieEncoding){case le.URLEncodedKeyValue:return Sn(t,this.settings.defaultPredicate);default:return{}}}buildGPCCodeValues(){return In(this.settings.globalPrivacyControl)}}const zt="_meta",Je={enabled:!1,from:1,to:2,originalMarker:zt,toMarker:zt,migrateMarkers:!1,targetIndexDBSettings:{database:"metarouter",timeout:100}};function yt(n,t){let e=window.location.search.slice(1);if(t&&(e=window.location.search.slice(1)||window.location.hash.slice(1)),e){e=e.split("#")[0];const r=e.split("&");for(let i=0;i<r.length;i++){const o=r[i].split("="),a=o[0],s=typeof o[1]===void 0?null:o[1];if(a===n)return s}}}const Gi=45,Ni=30,Li=45,jn=45,Mn=45,Tn="_gtag_settings_version",Ri=90,Ui=1440,kn="googleAnalytics4",de="googleAds",he="CM360",ve=[kn,de,he];function Ji(){return typeof window.gtag=="function"}var Ve=(n,t,e)=>new Promise((r,i)=>{var o=c=>{try{s(e.next(c))}catch(y){i(y)}},a=c=>{try{s(e.throw(c))}catch(y){i(y)}},s=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,a);s((e=e.apply(n,t)).next())});function xn(){return!!(yt("dclid")||yt("gclid")||yt("gbraid")||yt("wbraid")||yt("gclaw")||yt("gcldc")||yt("gclha")||yt("gclgf")||yt("gclgb")||yt("_gl")||yt("utm_source"))}function Fn(n){return Ve(this,null,function*(){const t=ve;let e="";for(const c in n)t.includes(n[c].name)&&(e+=JSON.stringify(n[c].settings));const i=new TextEncoder().encode(e),o=yield crypto.subtle.digest("SHA-1",i);return Array.from(new Uint8Array(o)).map(c=>c.toString(16).padStart(2,"0")).join("")})}function Gn(n,t,e,r,i){return Ve(this,null,function*(){const o=n&&n!==""?`${n}_main_gtag`:"_meta_main_gtag";if((yield r.getKey(o))===void 0)return r.saveKey(o,new Date().toISOString(),jn),!0;if(xn())return!0;{const a=yield Fn(e);if(a!==t)return r.saveKey(i,a,Mn),!0}return!1})}var Nn=Object.defineProperty,Be=Object.getOwnPropertySymbols,Ln=Object.prototype.hasOwnProperty,Rn=Object.prototype.propertyIsEnumerable,Ke=(n,t,e)=>t in n?Nn(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Un=(n,t)=>{for(var e in t||(t={}))Ln.call(t,e)&&Ke(n,e,t[e]);if(Be)for(var e of Be(t))Rn.call(t,e)&&Ke(n,e,t[e]);return n};function Jn(n,t,e){const r=Un({},n);return e.forEach(i=>{r[i]=t?"granted":"denied"}),r}function Ht(n,t,e,r){if(e&&e.consent.enabled&&ve.includes(n))return Jn(r,t,e.consent.syncCategories[n])}function Vn(n){return n?{ad_storage:"denied",ad_user_data:"denied",ad_personalization:"denied",analytics_storage:"denied"}:{ad_storage:"granted",ad_user_data:"granted",ad_personalization:"granted",analytics_storage:"granted"}}function Bn(n,t){ve.includes(n)&&(t[n]=!0)}function Kn(n,t){n.forEach(e=>{gtag("config",e.adsID,{send_page_view:!1,user_id:t})})}function zn(n){n.forEach(t=>{gtag("config",t,{send_page_view:!1})})}var ze=(n=>(n[n.Unknown=0]="Unknown",n[n.Cookie=1]="Cookie",n[n.IndexedDb=2]="IndexedDb",n[n.InMemory=3]="InMemory",n[n.TLDCookie=4]="TLDCookie",n))(ze||{}),pe=(n,t,e)=>new Promise((r,i)=>{var o=c=>{try{s(e.next(c))}catch(y){i(y)}},a=c=>{try{s(e.throw(c))}catch(y){i(y)}},s=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,a);s((e=e.apply(n,t)).next())});class Hn{constructor(t=zt,e=Je){this._marker=t,this._migrationSettings=e}marker(){return this._marker}getKey(t){return pe(this,null,function*(){return ce(t)})}saveKey(t,e,r){return pe(this,null,function*(){vn(t,e,r)})}deleteKey(t){return pe(this,null,function*(){pn(t)})}migrationSettings(){return this._migrationSettings}}function He(n,t){return new Hn(n,t)}function Wn(n,t,e){switch(n.type){case ze.Cookie:return He(t,e);default:return He(t,e)}}var qn=(n,t,e)=>new Promise((r,i)=>{var o=c=>{try{s(e.next(c))}catch(y){i(y)}},a=c=>{try{s(e.throw(c))}catch(y){i(y)}},s=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,a);s((e=e.apply(n,t)).next())});const Qn=n=>qn(void 0,null,function*(){switch(n){default:return{d:!1,e:"Library not found. Make sure the file was built with the correct library"}}});var We=(n,t,e)=>new Promise((r,i)=>{var o=c=>{try{s(e.next(c))}catch(y){i(y)}},a=c=>{try{s(e.throw(c))}catch(y){i(y)}},s=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,a);s((e=e.apply(n,t)).next())});const qe=class dr{constructor(t){this.settings=t,this.runBotDetection=()=>We(this,null,function*(){return Qn(this.settings.library)})}run(){return We(this,null,function*(){return new Promise(t=>{const e=setTimeout(()=>this.handleTimeout(t),this.settings.timeoutMs||dr.BOT_DETECTION_TIMEOUT_MS);this.runBotDetection().then(r=>{clearTimeout(e),t(r)}).catch(r=>{clearTimeout(e),t({d:!1,e:r})})})})}handleTimeout(t){t({d:!1,e:"timeout"})}};qe.BOT_DETECTION_TIMEOUT_MS=300;let Zn=qe;var Tt=(n,t,e)=>new Promise((r,i)=>{var o=c=>{try{s(e.next(c))}catch(y){i(y)}},a=c=>{try{s(e.throw(c))}catch(y){i(y)}},s=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,a);s((e=e.apply(n,t)).next())});class Yn{constructor(t,e,r,i,o,a,s=!1,c,y,w){this.timeoutMs=r,this.queueTasks=s,this.googleGtagSettings=y,this.botDetectionSettings=w;var D,x,F,T;if(this.googleGtagSettings=y,this._googleGtagConsent=Vn((x=(D=this.googleGtagSettings)==null?void 0:D.consent.explicitConsent)!=null?x:!1),this._googleGtagSyncs={},this._googleGtagVariables={integrations:t,matchID:i},o!==void 0&&(this._privacyStrategy=new gn(o.consentProvider,o.cookieName,o.impliedConsent,o.defaultGroupsValue,o.globalPrivacyControl),this.consentRequestInfo=this._privacyStrategy.getConsentRequestInfo(),this.globalPrivacyControlValue=this._privacyStrategy.getGlobalPrivacyControlValue()),c!==void 0){const J=new Dn({codes:c.codes,cookieEncoding:le.URLEncodedKeyValue,cookieName:c.cookieName,defaultPredicate:c.defaultPredicate,explicitConsent:c.explicitConsent,globalPrivacyControl:c.globalPrivacyControl});this.optOutCodesValues=J.optOutCodesValues,this.isExplicit=c.explicitConsent}const N=(F=e==null?void 0:e.marker)!=null?F:zt,K=(T=e==null?void 0:e.migration)!=null?T:Je;this.storage=Wn(e,N,K),this.integrations=[];const z=this.googleGtagSettings;for(const J in t){Bn(J,this._googleGtagSyncs);try{const V=new hn[J](t[J],this.storage,i,a);if(c!==void 0){const Y=this.getCodeFromSync(t[J]);this.optOutCodesValues&&Y?this.optOutCodesValues[Y]===!0?(this._googleGtagConsent=Ht(J,!1,z,this._googleGtagConsent),V.purgeData()):(this._googleGtagConsent=Ht(J,!0,z,this._googleGtagConsent),this.integrations.push(V)):console.warn(`Error, missing sync code or optOut values: SyncCode=${Y} OptOutCodes=${JSON.stringify(this.optOutCodesValues)}`)}else this.hasConsentByCategory(V.getPrivacySettings().OneTrustConsentCategory)?(this._googleGtagConsent=Ht(J,!0,z,this._googleGtagConsent),this.integrations.push(V)):(this._googleGtagConsent=Ht(J,!1,z,this._googleGtagConsent),V.purgeData())}catch(V){}}}get isExplicit(){return this._isExplicit}set isExplicit(t){this._isExplicit=t}get optOutCodesValues(){return this._optOutCodesValues}set optOutCodesValues(t){this._optOutCodesValues=t}getCodeFromSync(t){var e,r;return(r=(e=t==null?void 0:t.consentSettings)==null?void 0:e.code)==null?void 0:r.toLowerCase()}executeGoogleAnalyticsScript(){window.dataLayer=window.dataLayer||[];function t(...e){dataLayer.push(arguments)}window.gtag=t,this.googleGtagSettings.consent.enabled&&this._googleGtagConsent&&t("consent","default",this._googleGtagConsent);try{t("js",new Date),t("config",this.googleGtagSettings.tagID)}catch(e){console.error("Failed to load Google Gtag",e)}if(this._googleGtagSyncs[de]){const e=this._googleGtagVariables.integrations[de];Kn(e.conversions,this._googleGtagVariables.matchID)}if(this._googleGtagSyncs[he]){const e=this._googleGtagVariables.integrations[he];zn(e.CM360Advertisers.map(r=>r.advertiserID))}}loadScript(t){return new Promise((e,r)=>{const i=document.createElement("script");i.src=t,i.onload=()=>e(),i.onerror=a=>r(a),document.getElementsByTagName("head")[0].appendChild(i)})}loadAndUseScript(t){return Tt(this,null,function*(){try{yield this.loadScript(`https://www.googletagmanager.com/gtag/js?id=${t}`),this.executeGoogleAnalyticsScript()}catch(e){}})}initSync(){return Tt(this,null,function*(){var t;const e=[];if((t=this.googleGtagSettings)!=null&&t.tagID){const r=this.storage.marker(),i=r+Tn,o=yield this.storage.getKey(i);(yield Gn(r,o,this.integrations,this.storage,i))&&(yield this.loadAndUseScript(this.googleGtagSettings.tagID))}if(this.queueTasks){for(const r of this.integrations){const i=Kt((o,a)=>{r.initSync().then(o).catch(a)});e.push(i)}return this.getDataFromPromise(e)}else return this.integrations.forEach(r=>{const i=r.initSync();e.push(i)}),this.getDataFromPromise(e)})}getConsentCategories(){return this.consentRequestInfo}getGlobalPrivacyControlValue(){return this.globalPrivacyControlValue}reSync(t,e,r){return Tt(this,null,function*(){const i=[];return this.integrations.forEach(o=>{if(o.fireOnReSync===!0){const a=o.reSync(t,e,r);i.push(a)}}),this.getDataFromPromise(i)})}getDataFromPromise(t){const e=t.map(r=>{const i=new Promise(o=>setTimeout(()=>{o({name:"timeout",syncData:{}})},this.timeoutMs));return Promise.race([r,i])});return Promise.all(e).then(r=>Tt(this,null,function*(){const i={integrations:{}};return r.forEach(o=>{o.name!=="timeout"&&(i.integrations[o.name]=o.syncData)}),new Promise(o=>{o(i)})}))}hasConsentByCategory(t){return this._privacyStrategy===void 0?!0:this._privacyStrategy.hasConsentByCategory(t)}botDetection(){return Tt(this,null,function*(){try{return yield new Zn(this.botDetectionSettings).run()}catch(t){return{d:!1,e:`Error Running Library: ${t instanceof Error?t.message:"Unknown error"}`}}})}}var ye=(n,t,e)=>new Promise((r,i)=>{var o=c=>{try{s(e.next(c))}catch(y){i(y)}},a=c=>{try{s(e.throw(c))}catch(y){i(y)}},s=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,a);s((e=e.apply(n,t)).next())});function $n(n,t){return ye(this,null,function*(){return new Promise(function(e,r){const i=new XMLHttpRequest;i.open("POST",t),i.withCredentials=!0,i.onload=function(){if(this.status===200)try{const o=JSON.parse(i.response);o!=null&&o.ajs_anonymous_id_server?e(o.ajs_anonymous_id_server):r({status:502,statusText:"failed to find ajs_anonymous_id_server from server"})}catch(o){r({status:502,statusText:"failed to parse JSON request"})}else r({status:this.status,statusText:"error from server"})},i.onerror=function(){r({status:this.status,statusText:i.statusText})},i.send(JSON.stringify(n))})})}const Qe=(n,t,e,r=!1)=>ye(void 0,null,function*(){const i=`${t}/v1/s/c`,o=yield Promise.race([$n({anonymousId:n,override:r},i),ye(void 0,null,function*(){return yield new Promise(a=>setTimeout(a,e)),"timeout"})]);if(o==="timeout")throw new Error(`request timed out after ${e} microseconds`);return Promise.resolve(o)});var Vi=H(131),Ze=(n=>(n.UNKNOWN="unknown",n.BOTD="botD",n))(Ze||{}),Wt=(n,t,e)=>new Promise((r,i)=>{var o=c=>{try{s(e.next(c))}catch(y){i(y)}},a=c=>{try{s(e.throw(c))}catch(y){i(y)}},s=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,a);s((e=e.apply(n,t)).next())});function Xn(n,t){var e,r,i,o;const a=n.user();return t.previousId=(i=(r=(e=t.previousId)!=null?e:t.from)!=null?r:a.id())!=null?i:a.anonymousId(),t.userId=(o=t.userId)!=null?o:t.to,delete t.from,delete t.to,t}function ti(n,t,e){let r=!1,i,o={integrations:{}},a,s,c,y=!1;const w=new Rt(n.queue.queue.maxAttempts,"dest-meta.io"),D=!1,x=t.apiHost,F=`${x}/v1`;n.refreshCompliance=()=>{J({},n)},n.tracing=$=>{V($,{},n)};function T($){var nt,it;return((nt=t==null?void 0:t.deliveryStrategy)==null?void 0:nt.strategy)==="batching"?cn(x,(it=t==null?void 0:t.deliveryStrategy)==null?void 0:it.config):ln({trace:$,keepalive:t==null?void 0:t.keepalive})}let N=T(!1);function K($){return Wt(this,null,function*(){var nt,it;if(l())return w.push($),Vt(D,w,rt,Vt),$;const Ot=$.event.type.charAt(0);let ut=(0,Ne.D)($.event).json();return $.event.type==="track"&&delete ut.traits,$.event.type==="alias"&&(ut=Xn(n,ut)),ut.context.providers=o.integrations,ut.integrations=o.integrations,y!==void 0&&(ut.context.globalPrivacyControl=y),t.syncInjectorSettings.consent?ut.context.consent={explicit:c,optOut:s}:a!==void 0?ut.context.consent=a.consent:ut.context.consent={optOut:{}},((it=(nt=t==null?void 0:t.syncInjectorSettings)==null?void 0:nt.botDetectionSettings)==null?void 0:it.library)===Ze.BOTD?ut.context.bd=yield i.botDetection():ut.context.bd={d:!1},N.dispatch(`${F}/${Ot}`,dn(n,ut,t,e)).then(()=>$).catch(Ft=>((Ft.type==="error"||Ft.message==="Failed to fetch")&&(w.push($),Vt(D,w,rt,Vt)),$))})}function z(){return t.syncInjectorSettings.syncs.revjet!==void 0||t.syncInjectorSettings.syncs.neustar!==void 0||t.syncInjectorSettings.syncs.amobee!==void 0||t.syncInjectorSettings.syncs.bing!==void 0||t.syncInjectorSettings.syncs.bloomreach!==void 0||t.syncInjectorSettings.syncs.facebookPixel!==void 0||t.syncInjectorSettings.syncs.facebookTag!==void 0||t.syncInjectorSettings.syncs.googleGtag!==void 0||t.syncInjectorSettings.syncs.hubSpotTag!==void 0||t.syncInjectorSettings.syncs.movableInk!==void 0||t.syncInjectorSettings.syncs.pinterestCAPI!==void 0}function J($,nt){return Wt(this,null,function*(){r=z();const it=nt.user().anonymousId(),Ot=nt.user().id();return i=new Yn(t.syncInjectorSettings.syncs,t.syncInjectorSettings.storage,t.syncInjectorSettings.timeout,it,t.syncInjectorSettings.privacy,Ot,t.syncInjectorSettings.queueTasks,t.syncInjectorSettings.consent,t.syncInjectorSettings.googleGtagSettings,t.syncInjectorSettings.botDetectionSettings),o=yield i.initSync().catch(()=>({integrations:{}})),a=i.getConsentCategories(),y=i.getGlobalPrivacyControlValue(),s=i.optOutCodesValues,c=i.isExplicit,Promise.resolve({syncInjectorData:o})})}function V($,nt,it){N=T($)}function Y($){return Wt(this,null,function*(){var nt;if(r){const it=(0,Ne.D)($.event).json();yield dt(it.traits,n.user().anonymousId(),n.user().id()).catch(()=>Promise.resolve())}if(((nt=t.syncInjectorSettings.itpSettings)==null?void 0:nt.enabled)===!0)try{yield Qe(n.user().anonymousId(),t.apiHost,t.syncInjectorSettings.itpSettings.timeout,!0)}catch(it){}return K($)})}const rt={name:"metarouter",type:"after",version:"1.0.0",isLoaded:()=>!0,load:J,track:K,identify:Y,page:K,alias:K,group:K};return rt;function dt($,nt,it){return Wt(this,null,function*(){if(i!==void 0){const Ot=yield i.reSync($,nt,it).catch(()=>Promise.resolve({integrations:{}}));o.integrations=me(Ot)}return Promise.resolve()})}function me($){const nt={};for(const[it,Ot]of Object.entries(o.integrations)){nt[it]=Ot;for(const[ut,Ft]of Object.entries($.integrations))ut===it&&Object.keys(Ft).length!==0&&(nt[it]=Ft)}return nt}}const Ye=ti;var ei=H(871);function ri(n){return(0,u.mG)(this,void 0,void 0,function(){var t;return(0,u.Jh)(this,function(e){return t=navigator.userAgentData,t?n?[2,t.getHighEntropyValues(n).catch(function(){return t.toJSON()})]:[2,t.toJSON()]:[2,void 0]})})}var kt;function ni(){if(kt)return kt;var n=Ie(window.location.href);return kt={expires:31536e6,secure:!1,path:"/"},n&&(kt.domain=n),kt}function ii(n){var t={btid:"dataxu",urid:"millennial-media"};n.startsWith("?")&&(n=n.substring(1)),n=n.replace(/\?/g,"&");for(var e=n.split("&"),r=0,i=e;r<i.length;r++){var o=i[r],a=o.split("="),s=a[0],c=a[1];if(t[s])return{id:c,type:t[s]}}}function oi(n){return n.startsWith("?")&&(n=n.substring(1)),n=n.replace(/\?/g,"&"),n.split("&").reduce(function(t,e){var r=e.split("="),i=r[0],o=r[1],a=o===void 0?"":o;if(i.includes("utm_")&&i.length>4){var s=i.slice(4);s==="campaign"&&(s="name"),t[s]=(0,ei.a)(a)}return t},{})}function ai(){var n=_t.get("_ga");if(n&&n.startsWith("amp"))return n}function si(n,t,e){var r,i=new Pt(e?[]:[new Oe(ni())]),o=i.get("s:context.referrer"),a=(r=ii(n))!==null&&r!==void 0?r:o;a&&(t&&(t.referrer=(0,u.pi)((0,u.pi)({},t.referrer),a)),i.set("s:context.referrer",a))}var ui=function(n){try{var t=new URLSearchParams;return Object.entries(n).forEach(function(e){var r=e[0],i=e[1];Array.isArray(i)?i.forEach(function(o){return t.append(r,o)}):t.append(r,i)}),t.toString()}catch(e){return""}},ci=function(){function n(){var t=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(e,r){return(0,u.mG)(t,void 0,void 0,function(){var i,o;return(0,u.Jh)(this,function(a){switch(a.label){case 0:this.instance=r,a.label=1;case 1:return a.trys.push([1,3,,4]),i=this,[4,ri(this.instance.options.highEntropyValuesClientHints)];case 2:return i.userAgentData=a.sent(),[3,4];case 3:return o=a.sent(),[3,4];case 4:return[2,Promise.resolve()]}})})},this.enrich=function(e){var r,i,o=e.event.context,a=o.page.search||"",s=typeof a=="object"?ui(a):a;o.userAgent=navigator.userAgent,o.userAgentData=t.userAgentData;var c=navigator.userLanguage||navigator.language;typeof o.locale=="undefined"&&typeof c!="undefined"&&(o.locale=c),(r=o.library)!==null&&r!==void 0||(o.library={name:"analytics.js",version:"".concat(X()==="web"?"next":"npm:next","-").concat(L)}),s&&!o.campaign&&(o.campaign=oi(s));var y=ai();y&&(o.amp={id:y}),si(s,o,(i=t.instance.options.disableClientPersistence)!==null&&i!==void 0?i:!1);try{o.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(w){}return e},this.track=this.enrich,this.identify=this.enrich,this.page=this.enrich,this.group=this.enrich,this.alias=this.enrich,this.screen=this.enrich}return n}(),$e=new ci,li=Object.defineProperty,Xe=Object.getOwnPropertySymbols,fi=Object.prototype.hasOwnProperty,di=Object.prototype.propertyIsEnumerable,tr=(n,t,e)=>t in n?li(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,hi=(n,t)=>{for(var e in t||(t={}))fi.call(t,e)&&tr(n,e,t[e]);if(Xe)for(var e of Xe(t))di.call(t,e)&&tr(n,e,t[e]);return n},ge=(n,t,e)=>new Promise((r,i)=>{var o=c=>{try{s(e.next(c))}catch(y){i(y)}},a=c=>{try{s(e.throw(c))}catch(y){i(y)}},s=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,a);s((e=e.apply(n,t)).next())});function vi(n,t){qr(n,t),Wr(n,t)}function pi(n,t){return ge(this,null,function*(){yield Hr(n,t),Qr(n,t)})}function yi(n){return ge(this,arguments,function*(t,e={},r,i,o){var a,s,c,y,w;const x=hi({retryQueue:!0},e),F=(a=e.writeKey)!=null?a:t.apiKey,T=(s=e.ingestionURL)!=null?s:t.apiHost;if(t.apiKey=F,t.apiHost=T,o&&Br(o),!t.apiKey)throw new Error("missing writeKey");if(!t.apiHost)throw new Error("missing ingestionURL");const N=new xe({writeKey:F},x);if((c=t.syncInjectorSettings.itpSettings)!=null&&c.enabled)try{const Y=yield Qe(N.user().anonymousId(),t.apiHost,t.syncInjectorSettings.itpSettings.timeout);N.user().anonymousId(Y)}catch(Y){}if(vi(N,r),er(t)){const Y=yield Kt(dt=>{dt(Ye(N,t))}),rt=yield Kt(dt=>{dt($e)});i.push(Y),i.push(rt)}else{const Y=Ye(N,t);i.push(Y),i.push($e)}const K=yield N.register(...i),z=(y=window.location.search)!=null?y:"",J=(w=window.location.hash)!=null?w:"",V=z.length?z:J.replace(/(?=#).*(?=\?)/,"");return V.includes("ajs_")&&N.queryString(V).catch(console.error),N.initialized=!0,N.emit("initialize",t,e),e.initialPageview&&N.page().catch(console.error),yield pi(N,r),[N,K]})}class gi extends Yr{constructor(t){super(t)}static load(t,e={},r,i){return new this(o=>yi(t,e,o,r,i))}static standalone(t,e,r,i){return ge(this,null,function*(){return er(t)?yield Kt(o=>this.load(t,e,r,i).then(a=>o(a[0]))):this.load(t,e,r,i).then(o=>o[0])})}}function er(n){var t,e;return((t=n.syncInjectorSettings)==null?void 0:t.queueTasks)&&((e=n.syncInjectorSettings)==null?void 0:e.queueTasks)===!0}var xt=H(122);function mi(n,t){var e,r;return typeof(t==null?void 0:t.enabled)=="boolean"?t.enabled:(r=(e=n==null?void 0:n.__default)===null||e===void 0?void 0:e.enabled)!==null&&r!==void 0?r:!0}var _i=H(235),rr=/(https:\/\/.*)\/analytics\.js\/v1\/(?:.*?)\/(?:platform|analytics.*)?/,bi=function(){var n,t=Array.prototype.slice.call(document.querySelectorAll("script"));return t.forEach(function(e){var r,i=(r=e.getAttribute("src"))!==null&&r!==void 0?r:"",o=rr.exec(i);o&&o[1]&&(n=o[1])}),n},qt,wi=function(){var n,t=qt!=null?qt:(n=Me())===null||n===void 0?void 0:n._cdn;return t},Bi=function(n){var t=getGlobalAnalytics();t&&(t._cdn=n),qt=n},Si=function(){var n=wi();if(n)return n;var t=bi();return t||"https://metarouter-ajs-next-destinations-stage.s3.amazonaws.com"},nr=function(){var n=Si();return"".concat(n,"/next-integrations")};function Ki(){for(var n,t,e,r=(n=embeddedWriteKey())!==null&&n!==void 0?n:(t=getGlobalAnalytics())===null||t===void 0?void 0:t._writeKey,i=Array.prototype.slice.call(document.querySelectorAll("script")),o=void 0,a=0,s=i;a<s.length;a++){var c=s[a],y=(e=c.getAttribute("src"))!==null&&e!==void 0?e:"",w=rr.exec(y);if(w&&w[1]){o=y;break}}return o?o.replace("analytics.min.js","analytics.classic.js"):"https://cdn.segment.com/analytics.js/v1/".concat(r,"/analytics.classic.js")}function ir(n){var t=Array.prototype.slice.call(window.document.querySelectorAll("script"));return t.find(function(e){return e.src===n})}function or(n,t){var e=ir(n);if(e!==void 0){var r=e==null?void 0:e.getAttribute("status");if(r==="loaded")return Promise.resolve(e);if(r==="loading")return new Promise(function(i,o){e.addEventListener("load",function(){return i(e)}),e.addEventListener("error",function(a){return o(a)})})}return new Promise(function(i,o){var a,s=window.document.createElement("script");s.type="text/javascript",s.src=n,s.async=!0,s.setAttribute("status","loading");for(var c=0,y=Object.entries(t!=null?t:{});c<y.length;c++){var w=y[c],D=w[0],x=w[1];s.setAttribute(D,x)}s.onload=function(){s.onerror=s.onload=null,s.setAttribute("status","loaded"),i(s)},s.onerror=function(){s.onerror=s.onload=null,s.setAttribute("status","error"),o(new Error("Failed to load ".concat(n)))};var F=window.document.querySelector("script");F?(a=F.parentElement)===null||a===void 0||a.insertBefore(s,F):window.document.head.appendChild(s)})}function Ci(n){var t=ir(n);return t!==void 0&&t.remove(),Promise.resolve()}function ar(n){return n.toLowerCase().replace(".","").replace(/\s+/g,"-")}function sr(n,t){return t===void 0&&(t=!1),t?btoa(n).replace(/=/g,""):void 0}function zi(n){return("Integration"in n?n.Integration:n).prototype.name}function Pi(n,t,e){var r,i;try{var o=((i=(r=window==null?void 0:window.performance)===null||r===void 0?void 0:r.getEntriesByName(n,"resource"))!==null&&i!==void 0?i:[])[0];o&&t.stats.gauge("legacy_destination_time",Math.round(o.duration),(0,u.ev)([e],o.duration<100?["cached"]:[],!0))}catch(a){}}function Ii(n,t,e){var r;if("Integration"in n){var i={user:function(){return e.user()},addIntegration:function(){}};n(i),r=n.Integration}else r=n;var o=new r(t);return o.analytics=e,o}function Oi(n,t,e,r){return(0,u.mG)(this,void 0,void 0,function(){var i,o,a,s,c,y;return(0,u.Jh)(this,function(w){switch(w.label){case 0:i=ar(t),o=sr(i,r),a=nr(),s="".concat(a,"/integrations/").concat(o!=null?o:i,"/").concat(e,"/").concat(o!=null?o:i,".dynamic.js.gz"),w.label=1;case 1:return w.trys.push([1,3,,4]),[4,or(s)];case 2:return w.sent(),Pi(s,n,t),[3,4];case 3:throw c=w.sent(),n.stats.gauge("legacy_destination_time",-1,["plugin:".concat(t),"failed"]),c;case 4:return y=window["".concat(i,"Deps")],[4,Promise.all(y.map(function(D){return or(a+D+".gz")}))];case 5:return w.sent(),window["".concat(i,"Loader")](),[2,window["".concat(i,"Integration")]]}})})}function Ei(n,t,e){return(0,u.mG)(this,void 0,void 0,function(){var r,i,o,a;return(0,u.Jh)(this,function(s){return r=nr(),i=ar(n),o=sr(n,e),a="".concat(r,"/integrations/").concat(o!=null?o:i,"/").concat(t,"/").concat(o!=null?o:i,".dynamic.js.gz"),[2,Ci(a)]})})}function Hi(n){var t,e,r,i;return(i=(e=(t=n==null?void 0:n.versionSettings)===null||t===void 0?void 0:t.override)!==null&&e!==void 0?e:(r=n==null?void 0:n.versionSettings)===null||r===void 0?void 0:r.version)!==null&&i!==void 0?i:"latest"}function Qt(n,t){var e=t.methodName,r=t.integrationName,i=t.type,o=t.didError,a=o===void 0?!1:o;n.stats.increment("analytics_js.integration.invoke".concat(a?".error":""),1,["method:".concat(e),"integration_name:".concat(r),"type:".concat(i)])}var Ai=function(){var n,t,e=!1,r=new Promise(function(i,o){n=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];e=!0,i.apply(void 0,a)},t=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];e=!0,o.apply(void 0,a)}});return{resolve:n,reject:t,promise:r,isSettled:function(){return e}}};function Di(n,t){return(0,u.mG)(this,void 0,void 0,function(){var e,r=this;return(0,u.Jh)(this,function(i){switch(i.label){case 0:return e=[],l()?[2,t]:[4,Ge(function(){return t.length>0&&g()},function(){return(0,u.mG)(r,void 0,void 0,function(){var o,a,s;return(0,u.Jh)(this,function(c){switch(c.label){case 0:return o=t.pop(),o?[4,Dt(o,n)]:[2];case 1:return a=c.sent(),s=a instanceof vt,s||e.push(o),[2]}})})})];case 1:return i.sent(),e.map(function(o){return t.pushWithBackoff(o)}),[2,t]}})})}var ur=function(){function n(t,e,r,i,o,a){i===void 0&&(i={});var s=this;this.options={},this.type="destination",this.middleware=[],this.initializePromise=Ai(),this.flushing=!1,this.name=t,this.version=e,this.settings=(0,u.pi)({},i),this.disableAutoISOConversion=o.disableAutoISOConversion||!1,this.integrationSource=a,this.settings.type&&this.settings.type==="browser"&&delete this.settings.type,this.initializePromise.promise.then(function(c){return s._initialized=c},function(){}),this.options=o,this.buffer=o.disableClientPersistence?new $t(4,[]):new Rt(4,"".concat(r,":dest-").concat(t)),this.scheduleFlush()}return n.prototype.isLoaded=function(){return!!this._ready},n.prototype.ready=function(){var t=this;return this.initializePromise.promise.then(function(){var e;return(e=t.onReady)!==null&&e!==void 0?e:Promise.resolve()})},n.prototype.load=function(t,e){var r;return(0,u.mG)(this,void 0,void 0,function(){var i,o,a=this;return(0,u.Jh)(this,function(s){switch(s.label){case 0:return this._ready||this.onReady!==void 0?[2]:(r=this.integrationSource)!==null&&r!==void 0?(o=r,[3,3]):[3,1];case 1:return[4,Oi(t,this.name,this.version,this.options.obfuscate)];case 2:o=s.sent(),s.label=3;case 3:i=o,this.integration=Ii(i,this.settings,e),this.onReady=new Promise(function(c){var y=function(){a._ready=!0,c(!0)};a.integration.once("ready",y)}),this.integration.on("initialize",function(){a.initializePromise.resolve(!0)});try{Qt(t,{integrationName:this.name,methodName:"initialize",type:"classic"}),this.integration.initialize()}catch(c){throw Qt(t,{integrationName:this.name,methodName:"initialize",type:"classic",didError:!0}),this.initializePromise.resolve(!1),c}return[2]}})})},n.prototype.unload=function(t,e){return Ei(this.name,this.version,this.options.obfuscate)},n.prototype.addMiddleware=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.middleware=(t=this.middleware).concat.apply(t,e)},n.prototype.shouldBuffer=function(t){return t.event.type!=="page"&&(l()||this._ready!==!0||this._initialized!==!0)},n.prototype.send=function(t,e,r){var i,o;return(0,u.mG)(this,void 0,void 0,function(){var a,s,c,y,w,D;return(0,u.Jh)(this,function(x){switch(x.label){case 0:return this.shouldBuffer(t)?(this.buffer.push(t),this.scheduleFlush(),[2,t]):(a=(o=(i=this.options)===null||i===void 0?void 0:i.plan)===null||o===void 0?void 0:o.track,s=t.event.event,a&&s&&this.name!=="Segment.io"&&(c=a[s],mi(a,c)?t.updateEvent("integrations",(0,u.pi)((0,u.pi)({},t.event.integrations),c==null?void 0:c.integrations)):(t.updateEvent("integrations",(0,u.pi)((0,u.pi)({},t.event.integrations),{All:!1,"Segment.io":!0})),t.cancel(new d.Y({retry:!1,reason:"Event ".concat(s," disabled for integration ").concat(this.name," in tracking plan"),type:"Dropped by plan"}))),c!=null&&c.enabled&&(c==null?void 0:c.integrations[this.name])===!1&&t.cancel(new d.Y({retry:!1,reason:"Event ".concat(s," disabled for integration ").concat(this.name," in tracking plan"),type:"Dropped by plan"}))),[4,(0,_i.applyDestinationMiddleware)(this.name,t.event,this.middleware)]);case 1:if(y=x.sent(),y===null)return[2,t];w=new e(y,{traverse:!this.disableAutoISOConversion}),Qt(t,{integrationName:this.name,methodName:r,type:"classic"}),x.label=2;case 2:return x.trys.push([2,5,,6]),this.integration?[4,this.integration.invoke.call(this.integration,r,w)]:[3,4];case 3:x.sent(),x.label=4;case 4:return[3,6];case 5:throw D=x.sent(),Qt(t,{integrationName:this.name,methodName:r,type:"classic",didError:!0}),D;case 6:return[2,t]}})})},n.prototype.track=function(t){return(0,u.mG)(this,void 0,void 0,function(){return(0,u.Jh)(this,function(e){return[2,this.send(t,xt.Track,"track")]})})},n.prototype.page=function(t){var e;return(0,u.mG)(this,void 0,void 0,function(){return(0,u.Jh)(this,function(r){switch(r.label){case 0:return!((e=this.integration)===null||e===void 0)&&e._assumesPageview&&!this._initialized&&this.integration.initialize(),[4,this.initializePromise.promise];case 1:return r.sent(),[2,this.send(t,xt.Page,"page")]}})})},n.prototype.identify=function(t){return(0,u.mG)(this,void 0,void 0,function(){return(0,u.Jh)(this,function(e){return[2,this.send(t,xt.Identify,"identify")]})})},n.prototype.alias=function(t){return(0,u.mG)(this,void 0,void 0,function(){return(0,u.Jh)(this,function(e){return[2,this.send(t,xt.Alias,"alias")]})})},n.prototype.group=function(t){return(0,u.mG)(this,void 0,void 0,function(){return(0,u.Jh)(this,function(e){return[2,this.send(t,xt.Group,"group")]})})},n.prototype.scheduleFlush=function(){var t=this;this.flushing||setTimeout(function(){return(0,u.mG)(t,void 0,void 0,function(){var e;return(0,u.Jh)(this,function(r){switch(r.label){case 0:return l()||this._ready!==!0||this._initialized!==!0?(this.scheduleFlush(),[2]):(this.flushing=!0,e=this,[4,Di(this,this.buffer)]);case 1:return e.buffer=r.sent(),this.flushing=!1,this.buffer.todo>0&&this.scheduleFlush(),[2]}})})},Math.random()*5e3)},n}();function Wi(n,t,e,r,i,o){var a,s;if(e===void 0&&(e={}),r===void 0&&(r={}),isServer())return[];t.plan&&(r=r!=null?r:{},r.plan=t.plan);var c=(s=(a=t.middlewareSettings)===null||a===void 0?void 0:a.routingRules)!==null&&s!==void 0?s:[],y=t.integrations,w=r.integrations,D=mergedOptions(t,r!=null?r:{}),x=o==null?void 0:o.reduce(function(T,N){var K;return __assign(__assign({},T),(K={},K[resolveIntegrationNameFromSource(N)]=N,K))},{}),F=new Set(__spreadArray(__spreadArray([],Object.keys(y).filter(function(T){return isInstallableIntegration(T,y[T])}),!0),Object.keys(x||{}).filter(function(T){return isPlainObject(y[T])||isPlainObject(w==null?void 0:w[T])}),!0));return Array.from(F).filter(function(T){return!shouldSkipIntegration(T,e)}).map(function(T){var N=y[T],K=resolveVersion(N),z=new ur(T,K,n,D[T],r,x==null?void 0:x[T]),J=c.filter(function(V){return V.destinationName===T});return J.length>0&&i&&z.addMiddleware(i),z})}var cr=(n,t,e)=>new Promise((r,i)=>{var o=c=>{try{s(e.next(c))}catch(y){i(y)}},a=c=>{try{s(e.throw(c))}catch(y){i(y)}},s=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,a);s((e=e.apply(n,t)).next())});function ji(n){console.error("[analytics.js]","Failed to load Analytics.js",n)}function lr(n){return cr(this,null,function*(){try{return yield n()}catch(t){ji(t)}})}Z("web");function fr(){return cr(this,null,function*(){var n,t,e;const r={metarouter:{host:"https://demo-prod.mr-in.com",writeKey:"navya_dev",integrations:{},clientName:"metarouter-demo",syncInjectorSettings:{timeout:1e4,syncs:{},storage:{database:"metarouter",timeout:1e3,type:1,marker:"_meta",migration:{enabled:!1,from:1,to:2,originalMarker:"_meta",toMarker:"_meta",migrateMarkers:!1,targetIndexDBSettings:{database:"metarouter",timeout:100}}},privacy:{consentProvider:"OneTrust",cookieName:"OptanonConsent",impliedConsent:!1,defaultGroupsValue:!0,globalPrivacyControl:{categories:[],enabled:!1}},itpSettings:{enabled:!1,timeout:1e3},queueTasks:!0,consent:{codes:["C0004","C0003","C0002","C0001"],cookieName:"OptanonConsent",explicitConsent:!0,defaultPredicate:!0,cookieEncoding:"URLEncodedKeyValue",globalPrivacyControl:{enabled:!1,codes:[]}}}}},i=r.metarouter.syncInjectorSettings,o={apiKey:r.metarouter.writeKey,apiHost:r.metarouter.host,syncInjectorSettings:i},a=[];for(const c in r.metarouter.integrations){const y=new ur(c,"latest",r.metarouter.writeKey,r.metarouter.integrations[c],{});a.push(y)}window.metarouter=window.metarouter||[];const s=(t=(n=window.metarouter)==null?void 0:n._loadOptions)!=null?t:{};s.initialPageview=(e=s.initialPageview)!=null?e:!1,window.metarouter=yield gi.standalone(o,s,a,"metarouter")})}if(G()){const n=document.createElement("script");n.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.7.0/polyfill.min.js"),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>document.body.appendChild(n)):document.body.appendChild(n),n.onload=function(){lr(fr)}}else lr(fr)})()})();})();
